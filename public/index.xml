<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Blake Shaffer</title>
    <link>/</link>
      <atom:link href="/index.xml" rel="self" type="application/rss+xml" />
    <description>Blake Shaffer</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>en-us</language><copyright>¬© `2020`</copyright><lastBuildDate>Thu, 28 Jun 2018 00:00:00 +0100</lastBuildDate>
    <image>
      <url>/img/Blake-9943_small.jpg</url>
      <title>Blake Shaffer</title>
      <link>/</link>
    </image>
    
    <item>
      <title>Example Page 1</title>
      <link>/courses/example/example1/</link>
      <pubDate>Sun, 05 May 2019 00:00:00 +0100</pubDate>
      <guid>/courses/example/example1/</guid>
      <description>&lt;p&gt;In this tutorial, I&amp;rsquo;ll share my top 10 tips for getting started with Academic:&lt;/p&gt;
&lt;h2 id=&#34;tip-1&#34;&gt;Tip 1&lt;/h2&gt;
&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.&lt;/p&gt;
&lt;p&gt;Nullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.&lt;/p&gt;
&lt;p&gt;Cras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.&lt;/p&gt;
&lt;p&gt;Suspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.&lt;/p&gt;
&lt;p&gt;Aliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.&lt;/p&gt;
&lt;h2 id=&#34;tip-2&#34;&gt;Tip 2&lt;/h2&gt;
&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.&lt;/p&gt;
&lt;p&gt;Nullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.&lt;/p&gt;
&lt;p&gt;Cras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.&lt;/p&gt;
&lt;p&gt;Suspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.&lt;/p&gt;
&lt;p&gt;Aliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Example Page 2</title>
      <link>/courses/example/example2/</link>
      <pubDate>Sun, 05 May 2019 00:00:00 +0100</pubDate>
      <guid>/courses/example/example2/</guid>
      <description>&lt;p&gt;Here are some more tips for getting started with Academic:&lt;/p&gt;
&lt;h2 id=&#34;tip-3&#34;&gt;Tip 3&lt;/h2&gt;
&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.&lt;/p&gt;
&lt;p&gt;Nullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.&lt;/p&gt;
&lt;p&gt;Cras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.&lt;/p&gt;
&lt;p&gt;Suspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.&lt;/p&gt;
&lt;p&gt;Aliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.&lt;/p&gt;
&lt;h2 id=&#34;tip-4&#34;&gt;Tip 4&lt;/h2&gt;
&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.&lt;/p&gt;
&lt;p&gt;Nullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.&lt;/p&gt;
&lt;p&gt;Cras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.&lt;/p&gt;
&lt;p&gt;Suspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.&lt;/p&gt;
&lt;p&gt;Aliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Example Talk</title>
      <link>/talk/example/</link>
      <pubDate>Sat, 01 Jun 2030 13:00:00 +0000</pubDate>
      <guid>/talk/example/</guid>
      <description>&lt;div class=&#34;alert alert-note&#34;&gt;
  &lt;div&gt;
    Click on the &lt;strong&gt;Slides&lt;/strong&gt; button above to view the built-in slides feature.
  &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Slides can be added in a few ways:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Create&lt;/strong&gt; slides using Academic&amp;rsquo;s 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/managing-content/#create-slides&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;em&gt;Slides&lt;/em&gt;&lt;/a&gt; feature and link using &lt;code&gt;slides&lt;/code&gt; parameter in the front matter of the talk file&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Upload&lt;/strong&gt; an existing slide deck to &lt;code&gt;static/&lt;/code&gt; and link using &lt;code&gt;url_slides&lt;/code&gt; parameter in the front matter of the talk file&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Embed&lt;/strong&gt; your slides (e.g. Google Slides) or presentation video on this page using 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/writing-markdown-latex/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;shortcodes&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Further talk details can easily be added to this page using &lt;em&gt;Markdown&lt;/em&gt; and $\rm \LaTeX$ math code.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Stretching the Duck: How rising temperatures will change the level and shape of future electricity consumption</title>
      <link>/publication/riversshafferej2020/</link>
      <pubDate>Sun, 01 Nov 2020 00:00:00 +0000</pubDate>
      <guid>/publication/riversshafferej2020/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Misunderstanding Nonlinear Prices: Evidence from a Natural Experiment on Residential Electricity Demand</title>
      <link>/publication/aejpol2020/</link>
      <pubDate>Sat, 01 Aug 2020 00:00:00 +0000</pubDate>
      <guid>/publication/aejpol2020/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Canadian electricity markets during the COVID-19 pandemic: An initial assessment</title>
      <link>/publication/leachriversshaffer2020/</link>
      <pubDate>Mon, 01 Jun 2020 00:00:00 +0000</pubDate>
      <guid>/publication/leachriversshaffer2020/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Paying for performance: The role of policy in energy storage deployment</title>
      <link>/publication/shaffertabariwp2020/</link>
      <pubDate>Wed, 01 Apr 2020 00:00:00 +0000</pubDate>
      <guid>/publication/shaffertabariwp2020/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Location matters: Daylight saving time and electricity demand</title>
      <link>/publication/cje2019/</link>
      <pubDate>Fri, 01 Nov 2019 00:00:00 +0000</pubDate>
      <guid>/publication/cje2019/</guid>
      <description></description>
    </item>
    
    <item>
      <title>The Role of Storage in Alberta‚Äôs Electricity Market: Summary of a School of Public Policy Roundtable Event</title>
      <link>/publication/spp_electricityroundtable_summarypaper_2019/</link>
      <pubDate>Sun, 01 Sep 2019 00:00:00 +0000</pubDate>
      <guid>/publication/spp_electricityroundtable_summarypaper_2019/</guid>
      <description></description>
    </item>
    
    <item>
      <title>An example preprint / working paper</title>
      <link>/old-not-used/publication/preprint/</link>
      <pubDate>Sun, 07 Apr 2019 00:00:00 +0000</pubDate>
      <guid>/old-not-used/publication/preprint/</guid>
      <description>&lt;div class=&#34;alert alert-note&#34;&gt;
  &lt;div&gt;
    Click the &lt;em&gt;Slides&lt;/em&gt; button above to demo Academic&amp;rsquo;s Markdown slides feature.
  &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Supplementary notes can be added here, including 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/writing-markdown-latex/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;code and math&lt;/a&gt;.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Slides</title>
      <link>/slides/example/</link>
      <pubDate>Tue, 05 Feb 2019 00:00:00 +0000</pubDate>
      <guid>/slides/example/</guid>
      <description>&lt;h1 id=&#34;create-slides-in-markdown-with-academic&#34;&gt;Create slides in Markdown with Academic&lt;/h1&gt;
&lt;p&gt;
&lt;a href=&#34;https://sourcethemes.com/academic/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Academic&lt;/a&gt; | 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/managing-content/#create-slides&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Documentation&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;features&#34;&gt;Features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Efficiently write slides in Markdown&lt;/li&gt;
&lt;li&gt;3-in-1: Create, Present, and Publish your slides&lt;/li&gt;
&lt;li&gt;Supports speaker notes&lt;/li&gt;
&lt;li&gt;Mobile friendly slides&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;controls&#34;&gt;Controls&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Next: &lt;code&gt;Right Arrow&lt;/code&gt; or &lt;code&gt;Space&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Previous: &lt;code&gt;Left Arrow&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Start: &lt;code&gt;Home&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Finish: &lt;code&gt;End&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Overview: &lt;code&gt;Esc&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Speaker notes: &lt;code&gt;S&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Fullscreen: &lt;code&gt;F&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Zoom: &lt;code&gt;Alt + Click&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;
&lt;a href=&#34;https://github.com/hakimel/reveal.js#pdf-export&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;PDF Export&lt;/a&gt;: &lt;code&gt;E&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;code-highlighting&#34;&gt;Code Highlighting&lt;/h2&gt;
&lt;p&gt;Inline code: &lt;code&gt;variable&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Code block:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;porridge = &amp;quot;blueberry&amp;quot;
if porridge == &amp;quot;blueberry&amp;quot;:
    print(&amp;quot;Eating...&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;h2 id=&#34;math&#34;&gt;Math&lt;/h2&gt;
&lt;p&gt;In-line math: $x + y = z$&lt;/p&gt;
&lt;p&gt;Block math:&lt;/p&gt;
&lt;p&gt;$$
f\left( x \right) = ;\frac{{2\left( {x + 4} \right)\left( {x - 4} \right)}}{{\left( {x + 4} \right)\left( {x + 1} \right)}}
$$&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;fragments&#34;&gt;Fragments&lt;/h2&gt;
&lt;p&gt;Make content appear incrementally&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{{% fragment %}} One {{% /fragment %}}
{{% fragment %}} **Two** {{% /fragment %}}
{{% fragment %}} Three {{% /fragment %}}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Press &lt;code&gt;Space&lt;/code&gt; to play!&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;fragment &#34; &gt;
One
&lt;/span&gt;
&lt;span class=&#34;fragment &#34; &gt;
&lt;strong&gt;Two&lt;/strong&gt;
&lt;/span&gt;
&lt;span class=&#34;fragment &#34; &gt;
Three
&lt;/span&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;A fragment can accept two optional parameters:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;class&lt;/code&gt;: use a custom style (requires definition in custom CSS)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;weight&lt;/code&gt;: sets the order in which a fragment appears&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;speaker-notes&#34;&gt;Speaker Notes&lt;/h2&gt;
&lt;p&gt;Add speaker notes to your presentation&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-markdown&#34;&gt;{{% speaker_note %}}
- Only the speaker can read these notes
- Press `S` key to view
{{% /speaker_note %}}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Press the &lt;code&gt;S&lt;/code&gt; key to view the speaker notes!&lt;/p&gt;
&lt;aside class=&#34;notes&#34;&gt;
  &lt;ul&gt;
&lt;li&gt;Only the speaker can read these notes&lt;/li&gt;
&lt;li&gt;Press &lt;code&gt;S&lt;/code&gt; key to view&lt;/li&gt;
&lt;/ul&gt;
&lt;/aside&gt;
&lt;hr&gt;
&lt;h2 id=&#34;themes&#34;&gt;Themes&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;black: Black background, white text, blue links (default)&lt;/li&gt;
&lt;li&gt;white: White background, black text, blue links&lt;/li&gt;
&lt;li&gt;league: Gray background, white text, blue links&lt;/li&gt;
&lt;li&gt;beige: Beige background, dark text, brown links&lt;/li&gt;
&lt;li&gt;sky: Blue background, thin dark text, blue links&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;ul&gt;
&lt;li&gt;night: Black background, thick white text, orange links&lt;/li&gt;
&lt;li&gt;serif: Cappuccino background, gray text, brown links&lt;/li&gt;
&lt;li&gt;simple: White background, black text, blue links&lt;/li&gt;
&lt;li&gt;solarized: Cream-colored background, dark green text, blue links&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;

&lt;section data-noprocess data-shortcode-slide
  
      
      data-background-image=&#34;/img/boards.jpg&#34;
  &gt;

&lt;h2 id=&#34;custom-slide&#34;&gt;Custom Slide&lt;/h2&gt;
&lt;p&gt;Customize the slide style and background&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-markdown&#34;&gt;{{&amp;lt; slide background-image=&amp;quot;/img/boards.jpg&amp;quot; &amp;gt;}}
{{&amp;lt; slide background-color=&amp;quot;#0000FF&amp;quot; &amp;gt;}}
{{&amp;lt; slide class=&amp;quot;my-style&amp;quot; &amp;gt;}}
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;h2 id=&#34;custom-css-example&#34;&gt;Custom CSS Example&lt;/h2&gt;
&lt;p&gt;Let&amp;rsquo;s make headers navy colored.&lt;/p&gt;
&lt;p&gt;Create &lt;code&gt;assets/css/reveal_custom.css&lt;/code&gt; with:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-css&#34;&gt;.reveal section h1,
.reveal section h2,
.reveal section h3 {
  color: navy;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;h1 id=&#34;questions&#34;&gt;Questions?&lt;/h1&gt;
&lt;p&gt;
&lt;a href=&#34;https://spectrum.chat/academic&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Ask&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;
&lt;a href=&#34;https://sourcethemes.com/academic/docs/managing-content/#create-slides&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Documentation&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Canada‚Äôs aging population</title>
      <link>/post/canada-s-aging-population/</link>
      <pubDate>Mon, 28 Jan 2019 00:00:00 +0000</pubDate>
      <guid>/post/canada-s-aging-population/</guid>
      <description>


&lt;p&gt;Recently released data from Statistics Canada allows us to explore demographic trends in the age make-up of the Canadian population. The trend is clear: Canada is getting old.&lt;/p&gt;
&lt;p&gt;In this chart-blog, we will take a look at population by age group ‚Äì both across regions and over time ‚Äì and how median age has evolved. (Spoiler: It‚Äôs risen. A lot!)&lt;/p&gt;
&lt;p&gt;You can find the chart-blog &lt;a href=&#34;/post/compiled/Population-pyramids.html&#34;&gt;here&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Trucks! Trucks! Trucks!</title>
      <link>/post/trucks-trucks-trucks/</link>
      <pubDate>Mon, 17 Dec 2018 00:00:00 +0000</pubDate>
      <guid>/post/trucks-trucks-trucks/</guid>
      <description>


&lt;p&gt;Quick post to show how easy it is to do quick data exploration using R. This post walks us through making a (nice!) chart of &lt;strong&gt;new vehicle sales in Canada&lt;/strong&gt;, breaking it down by vehicle type and region.&lt;/p&gt;
&lt;div id=&#34;step-1-load-the-three-packages-we-will-use-for-this-plot&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Step 1: Load the three packages we will use for this plot:&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;tidyverse&lt;/code&gt; : because always tidyverse&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cansim&lt;/code&gt; : great package to easily extract Statistics Canada data&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ggthemes&lt;/code&gt; : not necessary, but a quick way to pretty up your ggplot&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tidyverse)
library(cansim)
library(ggthemes)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;step-2-data-wranglin&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Step 2: Data wranglin‚Äô&lt;/h2&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;Pull in the data&lt;/li&gt;
&lt;li&gt;Filter to what we want in the data&lt;/li&gt;
&lt;li&gt;Fiddle with some labels&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data &amp;lt;- get_cansim(20100001) %&amp;gt;% normalize_cansim_values()

plotdata &amp;lt;- data %&amp;gt;%
  filter(GEO!=&amp;quot;Canada&amp;quot;,
         Sales==&amp;quot;Units&amp;quot;,
         `Vehicle type` %in% c(&amp;quot;Passenger cars&amp;quot;,&amp;quot;Trucks&amp;quot;),
         `Origin of manufacture`==&amp;quot;Total, country of manufacture&amp;quot;)

# Change some GEO labels to shorten them
plotdata$GEO[plotdata$GEO==&amp;quot;Newfoundland and Labrador&amp;quot;] &amp;lt;- &amp;quot;Nfld &amp;amp; Lab.&amp;quot;
plotdata$GEO[plotdata$GEO==&amp;quot;British Columbia and the Territories&amp;quot;] &amp;lt;- &amp;quot;BC &amp;amp; Terr.&amp;quot;
plotdata$GEO[plotdata$GEO==&amp;quot;Prince Edward Island&amp;quot;] &amp;lt;- &amp;quot;PEI&amp;quot;
plotdata$GEO &amp;lt;- factor(plotdata$GEO, levels=c(&amp;quot;BC &amp;amp; Terr.&amp;quot;,&amp;quot;Alberta&amp;quot;,&amp;quot;Saskatchewan&amp;quot;,&amp;quot;Manitoba&amp;quot;,&amp;quot;Ontario&amp;quot;,&amp;quot;Quebec&amp;quot;,&amp;quot;New Brunswick&amp;quot;,&amp;quot;PEI&amp;quot;,&amp;quot;Nova Scotia&amp;quot;,&amp;quot;Nfld &amp;amp; Lab.&amp;quot;))

# Change &amp;quot;passenger cars&amp;quot; to &amp;quot;cars&amp;quot; for plot label
plotdata$`Vehicle type`[plotdata$`Vehicle type`==&amp;quot;Passenger cars&amp;quot;] &amp;lt;- &amp;quot;Cars&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;step-3-plot-it&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Step 3: Plot it!&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ggplot(plotdata, aes(Date,VALUE,color=`Vehicle type`))+
  geom_point(size=.1,alpha=.2)+
  geom_smooth(se=F)+
  facet_wrap(~GEO, scales=&amp;quot;free_y&amp;quot;, nrow=2)+
  scale_color_ptol(name=&amp;quot;&amp;quot;)+  # nice color scheme from ggthemes package
  scale_x_date(limits=c(as.Date(&amp;quot;1980-01-01&amp;quot;),as.Date(&amp;quot;2020-01-01&amp;quot;)),
               breaks = c(as.Date(&amp;quot;1980-01-01&amp;quot;),as.Date(&amp;quot;2000-01-01&amp;quot;),as.Date(&amp;quot;2020-01-01&amp;quot;)),
               date_labels = &amp;quot;%Y&amp;quot;)+
  theme_tufte(12,&amp;quot;Shree Devanagari 714&amp;quot;)+     # font similar to &amp;#39;Avenir&amp;#39;
  theme(legend.position = &amp;quot;top&amp;quot;,
        title=element_text(face=&amp;quot;bold&amp;quot;),
        plot.caption = element_text(face=&amp;quot;italic&amp;quot;),
        legend.text = element_text(size=14))+
  labs(x=&amp;quot;&amp;quot;, y=&amp;quot;&amp;quot;,
       subtitle=&amp;quot;New vehicle sales (monthly)&amp;quot;,
       title=&amp;quot;Trucks! Trucks! Trucks!&amp;quot;,
       caption=&amp;quot;Fitted line through monthly (seasonally unadjusted) data.\nSource: Statscan NDM Table 20-10-0001.&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-17-trucks-trucks-trucks_files/figure-html/truckplot-1.png&#34; width=&#34;864&#34; /&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;There you go. A nice quick plot showing a pretty stark shift in consumer preferences towards trucks across &lt;em&gt;all regions&lt;/em&gt; in Canada. An interesting extension of this data exploration would be to see what this means in terms of fleet-wide fuel economy. Are people switching from Civics to F-150s? Or Crown Vics to Subaru Crosstreks? The latter would mean a shift from cars to ‚Äútrucks‚Äù is improving overall gas mileage‚Ä¶ More data needed!&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Happy Charting!&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;-Blake&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Making animated charts with gganimate</title>
      <link>/post/making-animated-charts-with-gganimate/</link>
      <pubDate>Fri, 14 Dec 2018 00:00:00 +0000</pubDate>
      <guid>/post/making-animated-charts-with-gganimate/</guid>
      <description>


&lt;p&gt;What‚Äôs better than making charts? Making them animated, of course! While animation isn‚Äôt always (ok, rarely) necessary, it can help tell a story static charts can‚Äôt.&lt;/p&gt;
&lt;p&gt;Recently there has been a lot of discussion in Canada related to &lt;em&gt;equalization&lt;/em&gt;. This is a federal program to transfer funds to provinces with below average fiscal capacity. What is ‚Äúfiscal capacity‚Äù? Others can tell you a &lt;a href=&#34;https://ideas.repec.org/p/clg/wpaper/2018-13.html&#34;&gt;&lt;strong&gt;lot&lt;/strong&gt;&lt;/a&gt; more about it, but for simplicity, we can think of it like GDP.&lt;/p&gt;
&lt;p&gt;So I wanted to take a look at GDP per capita, by province, going back several years. A little learning, a lot of online digging, and I was able to create this nice chart:&lt;/p&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;en&#34;&gt;
&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;
I made a chart. &lt;a href=&#34;https://twitter.com/hashtag/cdnecon?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#cdnecon&lt;/a&gt; &lt;a href=&#34;https://twitter.com/hashtag/cdnpoli?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#cdnpoli&lt;/a&gt; &lt;a href=&#34;https://t.co/Ks8o5E4qir&#34;&gt;pic.twitter.com/Ks8o5E4qir&lt;/a&gt;
&lt;/p&gt;
‚Äî Blake Shaffer üìä (&lt;span class=&#34;citation&#34;&gt;@bcshaffer&lt;/span&gt;) &lt;a href=&#34;https://twitter.com/bcshaffer/status/1073340073184296960?ref_src=twsrc%5Etfw&#34;&gt;December 13, 2018&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;p&gt;People seemed to like it and some wanted to know more about how it was made. This post explains how to make an animated chart like the tweeted one above using &lt;code&gt;gganimate&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;##Let‚Äôs go!&lt;/p&gt;
&lt;p&gt;To begin, let‚Äôs load our usual packages, but add in the latest version of &lt;code&gt;gganimate&lt;/code&gt; from David Robinson which has been updated by Thomas Lin Pedersen. Thomas has added some new syntax which allows for &lt;em&gt;really nice transitions&lt;/em&gt; to the animation.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tidyverse)
library(lubridate)
library(ggthemes)
library(ggrepel)

# Package to pull in cansim data, courtesy of Jens von Bergman and Dmitry Shkolnik
library(cansim) 

# Now update to the newest gganimate version
#install.packages(&amp;quot;devtools&amp;quot;)
#devtools::install_github(&amp;#39;thomasp85/gganimate&amp;#39;)
library(gganimate)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;With packages loaded, it‚Äôs time to wrangle the data. I could probably do this cleaner, but meh - it works! I wrote a function below to change the full province names to their 2 character abbreviations that we will use in the plots.&lt;/p&gt;
&lt;p&gt;##Let‚Äôs start by pulling in annual GDP data by province and to test it‚Äôs working do a quick plot.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;provlist &amp;lt;- c(&amp;quot;British Columbia&amp;quot;,&amp;quot;Alberta&amp;quot;,&amp;quot;Saskatchewan&amp;quot;,&amp;quot;Manitoba&amp;quot;,&amp;quot;Ontario&amp;quot;,&amp;quot;Quebec&amp;quot;,&amp;quot;New Brunswick&amp;quot;,&amp;quot;Nova Scotia&amp;quot;,&amp;quot;Prince Edward Island&amp;quot;,&amp;quot;Newfoundland and Labrador&amp;quot;)

short_provs &amp;lt;- function(df){
  df &amp;lt;- df %&amp;gt;%
    filter(GEO %in% c(&amp;quot;British Columbia&amp;quot;,&amp;quot;Alberta&amp;quot;,&amp;quot;Saskatchewan&amp;quot;,&amp;quot;Manitoba&amp;quot;,&amp;quot;Ontario&amp;quot;,&amp;quot;Quebec&amp;quot;,&amp;quot;New Brunswick&amp;quot;,&amp;quot;Nova Scotia&amp;quot;,&amp;quot;Prince Edward Island&amp;quot;,&amp;quot;Newfoundland and Labrador&amp;quot;))
  df &amp;lt;- df %&amp;gt;%
    mutate(GEO.short = case_when(
      GEO==&amp;quot;British Columbia&amp;quot; ~ &amp;quot;BC&amp;quot;,
      GEO==&amp;quot;Alberta&amp;quot; ~ &amp;quot;AB&amp;quot;,
      GEO==&amp;quot;Saskatchewan&amp;quot; ~ &amp;quot;SK&amp;quot;,
      GEO==&amp;quot;Manitoba&amp;quot; ~ &amp;quot;MB&amp;quot;,
      GEO==&amp;quot;Ontario&amp;quot; ~ &amp;quot;ON&amp;quot;,
      GEO==&amp;quot;Quebec&amp;quot; ~ &amp;quot;QC&amp;quot;,
      GEO==&amp;quot;New Brunswick&amp;quot; ~ &amp;quot;NB&amp;quot;,
      GEO==&amp;quot;Prince Edward Island&amp;quot; ~ &amp;quot;PE&amp;quot;,
      GEO==&amp;quot;Nova Scotia&amp;quot; ~ &amp;quot;NS&amp;quot;,
      GEO==&amp;quot;Newfoundland and Labrador&amp;quot; ~ &amp;quot;NL&amp;quot;
    ))
  df$GEO.short &amp;lt;- factor(df$GEO.short, levels=c(&amp;quot;BC&amp;quot;,&amp;quot;AB&amp;quot;,&amp;quot;SK&amp;quot;,&amp;quot;MB&amp;quot;,&amp;quot;ON&amp;quot;,&amp;quot;QC&amp;quot;,&amp;quot;NB&amp;quot;,&amp;quot;PE&amp;quot;,&amp;quot;NS&amp;quot;,&amp;quot;NL&amp;quot;))
}

GDP &amp;lt;- get_cansim(36100222) %&amp;gt;% normalize_cansim_values()
df.GDP &amp;lt;- GDP %&amp;gt;%
  mutate(year=as.integer(REF_DATE)) %&amp;gt;%
  filter(GEO %in% provlist,
         Prices==&amp;quot;Chained (2012) dollars&amp;quot;,
         Estimates==&amp;quot;Gross domestic product at market prices&amp;quot;) %&amp;gt;%
  dplyr::select(GEO,year,GDP=VALUE)
df.GDP$GEO.short&amp;lt;-short_provs(df.GDP)

ggplot(df.GDP, aes(GEO.short, GDP/1e9, fill = GEO.short, label=GEO.short)) +
  geom_col()+
  geom_text(vjust=-.1)+
  scale_fill_viridis_d(name=&amp;quot;&amp;quot;)+
  scale_y_continuous(labels=scales::dollar)+
  theme_tufte(14,&amp;quot;Avenir&amp;quot;)+
  theme(legend.position = &amp;quot;none&amp;quot;,
        axis.text.x = element_blank(),
        axis.ticks = element_blank())+
  # Here comes the gganimate specific bits
  labs(title = &amp;quot;Year: {frame_time}&amp;quot;, x = &amp;quot;&amp;quot;, y = &amp;quot;GDP (2012$ billions&amp;quot;) +
  transition_time(year) +
  ease_aes(&amp;#39;linear&amp;#39;)        &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-14-making-animated-charts-with-gganimate_files/figure-html/GDP-1.gif&#34; /&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;Ok. Good! We have an animated chart! But it‚Äôs not too informative given the BIG and small size of provinces. So to look at per capita GDP we need to pull in annual population data and merge it with our GDP data.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;pop &amp;lt;- get_cansim(17100005) %&amp;gt;% normalize_cansim_values()
df.pop &amp;lt;- pop %&amp;gt;%
  mutate(year=as.integer(REF_DATE)) %&amp;gt;%
  filter(GEO %in% provlist,
         Sex==&amp;quot;Both sexes&amp;quot;,
         `Age group`==&amp;quot;All ages&amp;quot;) %&amp;gt;%
  dplyr::select(GEO,year,pop=VALUE)

df.GDPpercap &amp;lt;-left_join(df.GDP,df.pop, by=c(&amp;quot;year&amp;quot;,&amp;quot;GEO&amp;quot;)) %&amp;gt;%
  mutate(GDPpercap=GDP/pop)

df.GDPpercap$GEO.short&amp;lt;-short_provs(df.GDPpercap)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;##Now, let‚Äôs create our plot.&lt;/p&gt;
&lt;p&gt;I‚Äôm going to use the &lt;code&gt;animate&lt;/code&gt; function here so that I can change the speed of the animation a bit, and add a pause at the end.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;p&amp;lt;-ggplot(df.GDPpercap, aes(GEO.short, GDPpercap, fill=GEO.short, label=GEO.short)) +
  geom_col()+
  geom_text(vjust=-.1)+
  scale_fill_viridis_d(name=&amp;quot;&amp;quot;)+
  theme_tufte(14,&amp;quot;Avenir&amp;quot;)+
  theme(legend.position = &amp;quot;none&amp;quot;,
        axis.text.x = element_blank(),
        axis.ticks = element_blank())+
  # Here comes the gganimate specific bits
  labs(title = &amp;#39;Year: {frame_time}&amp;#39;, x = &amp;#39;&amp;#39;, y = &amp;#39;GDP per capita ($2012)&amp;#39;) +
  transition_time(year) +
  ease_aes(&amp;#39;linear&amp;#39;)  
animate(p, fps=5, end_pause = 30) # Use anim_save(filename) to save the plot&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-14-making-animated-charts-with-gganimate_files/figure-html/gdppercap-1.gif&#34; /&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;Not bad. But we can do better! It would be fun to get the provinces to rank themselves every frame. And let‚Äôs flip it horizontally too to look like they‚Äôre climbing over one another.&lt;/p&gt;
&lt;p&gt;A little digging on stackoverflow took me to this post by Jon Spring: &lt;a href=&#34;https://stackoverflow.com/questions/52623722/how-does-gganimate-order-an-ordered-bar-time-series&#34;&gt;(https://stackoverflow.com/questions/52623722/how-does-gganimate-order-an-ordered-bar-time-series)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Basically, we add a rank variable, grouping first by year and ordering the provinces. We will use this as our x axis (vertical axis in the flipped coordinates). We will also use &lt;code&gt;geom_tile&lt;/code&gt; instead of &lt;code&gt;geom_col&lt;/code&gt; because this object creates smoother transitions in the size of the bars.&lt;/p&gt;
&lt;div id=&#34;the-tweeted-chart&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;The tweeted chart!&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plotdata &amp;lt;- df.GDPpercap %&amp;gt;%
  group_by(year) %&amp;gt;%
  mutate(ordering = rank(GDPpercap)) %&amp;gt;%
  ungroup() 

p&amp;lt;-ggplot(plotdata,
       aes(ordering, group = GEO.short,color=GEO.short,fill=GEO.short)) +
  geom_tile(aes(y = GDPpercap/2, 
                height = GDPpercap,
                width = 0.9), alpha = 0.9) +
  # text on top of bars
  geom_text(aes(y = GDPpercap, label = GEO.short), hjust = -0.4) +
  # text in x-axis (requires clip = &amp;quot;off&amp;quot; in coord_cartesian)
  geom_text(aes(y = 0, label = GEO.short), hjust = 1.4) +
  coord_flip(clip = &amp;quot;off&amp;quot;, expand = FALSE) +
  scale_color_viridis_d(name=&amp;quot;&amp;quot;)+
  scale_fill_viridis_d(name=&amp;quot;&amp;quot;)+
  scale_y_continuous(labels=scales::dollar)+
  theme_tufte(14,&amp;quot;Avenir&amp;quot;)+
  guides(color=F,fill=F)+
  labs(title=&amp;#39;{frame_time}&amp;#39;, x = &amp;quot;&amp;quot;,y=&amp;quot;GDP per capita ($2012)&amp;quot;) +
  theme(plot.title = element_text(hjust = 1, size = 22),
        axis.ticks.y = element_blank(),
        axis.text.y  = element_blank()) + 
  transition_time(year)+
  ease_aes(&amp;#39;cubic-in-out&amp;#39;)

animate(p, nframes = 100, fps = 5, end_pause = 20) #again, use anim_save(filename) to save&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-14-making-animated-charts-with-gganimate_files/figure-html/GDPpercap_good_plot-1.gif&#34; /&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;Cool. If i do say so myself :-)&lt;/p&gt;
&lt;p&gt;But wait, we can do more! Rather than bars, let‚Äôs plot points as in a scatter plot and watch them float over time. We can start by looking at the co-movement of &lt;strong&gt;GDP per capita&lt;/strong&gt; and &lt;strong&gt;unemployment&lt;/strong&gt; rates across provinces over time. I pull in the annual LFS data from &lt;code&gt;NDM 14-10-0090&lt;/code&gt;, merging the annual unemployment rate values with our GDP per capita data.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;lets-chart-it&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Let‚Äôs chart it!&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;p&amp;lt;-ggplot(df.full, 
       aes(GDPpercap,Unemp_Rate,
           color=GEO.short, label=GEO.short)) +
  geom_point(aes(size=pop))+
  geom_text(hjust=-.2,vjust=-.2)+
  scale_color_viridis_d(name=&amp;quot;&amp;quot;)+
  scale_y_continuous(labels=scales::percent)+
  scale_x_continuous(labels=scales::dollar)+
  theme_tufte(14,&amp;quot;Avenir&amp;quot;)+
  theme(legend.position = &amp;quot;none&amp;quot;,
        plot.caption = element_text(size=9,face=&amp;quot;italic&amp;quot;))+
  guides(size=F,color=F)+
  # Here comes the gganimate specific bits
  labs(title = &amp;#39;Year: {frame_time}&amp;#39;,
       x = &amp;#39;GDP per capita ($2012)&amp;#39;,
       y = &amp;quot;Unemployment Rate&amp;quot;,
       caption=&amp;quot;Bubble size proportional to population\nChart by @bcshaffer&amp;quot;) +
  transition_time(year) +
  ease_aes(&amp;#39;linear&amp;#39;)  
animate(p, nframes = 100, fps = 10, width = 600, height = 400, end_pause = 30)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-14-making-animated-charts-with-gganimate_files/figure-html/unemp-1.gif&#34; /&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;Lastly, we can do the same with the &lt;strong&gt;employment rate&lt;/strong&gt;. This time leads add some bread crumbs behind our roving points to get some history.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;p&amp;lt;-ggplot(df.full, 
       aes(GDPpercap,Emp_Rate,
           color=GEO.short, label=GEO.short)) +
  geom_point(aes(size=pop))+
  geom_text(hjust=-.2,vjust=-.2)+
  scale_color_viridis_d(name=&amp;quot;&amp;quot;)+
  scale_y_continuous(labels=scales::percent)+
  scale_x_continuous(labels=scales::dollar)+
  theme_tufte(14,&amp;quot;Avenir&amp;quot;)+
  theme(legend.position = &amp;quot;none&amp;quot;,
        plot.caption = element_text(size=9,face=&amp;quot;italic&amp;quot;))+
  guides(size=F,color=F)+
  # Here comes the gganimate specific bits
  labs(title = &amp;#39;Year: {frame_time}&amp;#39;,
       x = &amp;#39;GDP per capita ($2012)&amp;#39;,
       y = &amp;quot;Employment Rate&amp;quot;,
       caption=&amp;quot;Bubble size proportional to population\nChart by @bcshaffer&amp;quot;) +
  transition_time(year) +
  shadow_wake(wake_length = 1, exclude_layer = 2)+
  ease_aes(&amp;#39;cubic-in-out&amp;#39;)
  #ease_aes(&amp;#39;linear&amp;#39;)  
animate(p, nframes = 100, fps = 10, width = 600, height = 400, end_pause = 30)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-14-making-animated-charts-with-gganimate_files/figure-html/emp-1.gif&#34; /&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;Happy charting!&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;-Blake&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>New Statscan data on victims of violent crime in Canada</title>
      <link>/post/new-statscan-data-on-victims-of-violent-crime/</link>
      <pubDate>Thu, 06 Dec 2018 00:00:00 +0000</pubDate>
      <guid>/post/new-statscan-data-on-victims-of-violent-crime/</guid>
      <description>


&lt;p&gt;Statistics Canada recently released new data on victims of violent crime across Canada from 2009 to 2017. In this post, I explore trends in this data by region, age and gender.&lt;/p&gt;
&lt;p&gt;I find, unsurprisingly, big differences in incidence by gender. The rate of violent crime, notably sexual assaults, remains extremely skewed towards women. The rate of violent crime causing death and attempted murder is skewed towards men but remains relatively low in Canada. &lt;strong&gt;Alarmingly, the rate of sexual assaults towards young girls is high and climbing.&lt;/strong&gt; Regional splits also show concerning trends in certain regions.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Let‚Äôs start by pulling in the data which can be found in NDM table 35-10-0051.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tidyverse)
library(cansim)
library(ggthemes)

data &amp;lt;- get_cansim(35100051) %&amp;gt;% normalize_cansim_values() %&amp;gt;%
  mutate(year = as.numeric(REF_DATE))
data$GEO &amp;lt;- factor(data$GEO, levels=c(&amp;quot;Canada&amp;quot;,
                                      &amp;quot;British Columbia&amp;quot;,
                                      &amp;quot;Alberta&amp;quot;,
                                      &amp;quot;Saskatchewan&amp;quot;,
                                      &amp;quot;Manitoba&amp;quot;,
                                      &amp;quot;Ontario&amp;quot;,
                                      &amp;quot;Quebec&amp;quot;,
                                      &amp;quot;New Brunswick&amp;quot;,
                                      &amp;quot;Prince Edward Island&amp;quot;,
                                      &amp;quot;Nova Scotia&amp;quot;,
                                      &amp;quot;Newfoundland and Labrador&amp;quot;,
                                      &amp;quot;Yukon&amp;quot;,
                                      &amp;quot;Northwest Territories&amp;quot;,
                                      &amp;quot;Nunavut&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;To start, let‚Äôs look at Canada-wide total violations, by gender:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plotdata &amp;lt;- data %&amp;gt;%
  filter( `Sex of victim`!=&amp;quot;Total, sex of victim&amp;quot;,
          `Sex of victim`!=&amp;quot;Sex of victim unknown&amp;quot;,
          `Age of victim`==&amp;quot;Total, age of victim&amp;quot;,
          Statistics==&amp;quot;Rate per 100,000 population&amp;quot;,
          GEO==&amp;quot;Canada&amp;quot;,
          Violations==&amp;quot;Total, all violations&amp;quot;)
ggplot(plotdata,
       aes(Date,VALUE, group=`Sex of victim`, color=`Sex of victim`))+
  geom_line(size=1.5)+
  theme_light(12,&amp;quot;Avenir&amp;quot;)+
  scale_color_manual(name=&amp;quot;&amp;quot;,values=c(&amp;quot;#CC6677&amp;quot;,&amp;quot;#4477AA&amp;quot;))+
  theme(legend.position = &amp;quot;top&amp;quot;)+
  labs(x=&amp;quot;&amp;quot;,y=&amp;quot;Rate per 100,000 population&amp;quot;,
       title=&amp;quot;Victims of police-reported violent crime&amp;quot;,
       subtitle=&amp;quot;Total, all ages&amp;quot;,
       caption=&amp;quot;Source: Statistics Canada NDM 35-10-0051\nChart by @bcshaffer&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-06-new-statscan-data-on-victims-of-violent-crime_files/figure-html/unnamed-chunk-2-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;We can dig a little deeper and see how this breaks down by age group:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# by age
plotdata &amp;lt;- data %&amp;gt;%
  filter( `Sex of victim`!=&amp;quot;Total, sex of victim&amp;quot;,
          `Sex of victim`!=&amp;quot;Sex of victim unknown&amp;quot;,
          `Age of victim` %in% c(&amp;quot;Under 12 years&amp;quot;,
                                 &amp;quot;12 to 17 years&amp;quot;,
                                 &amp;quot;18 years and over&amp;quot;),
          Statistics==&amp;quot;Rate per 100,000 population&amp;quot;,
          GEO==&amp;quot;Canada&amp;quot;,
          Violations==&amp;quot;Total, all violations&amp;quot;)
plotdata$`Age of victim` &amp;lt;- factor(plotdata$`Age of victim`,
                                   levels=c(&amp;quot;Under 12 years&amp;quot;,
                                            &amp;quot;12 to 17 years&amp;quot;,
                                            &amp;quot;18 years and over&amp;quot;))
ggplot(plotdata,
       aes(Date,VALUE, group=`Sex of victim`, color=`Sex of victim`))+
  geom_line(size=1.5)+
  theme_light(12,&amp;quot;Avenir&amp;quot;)+
  facet_wrap(~ `Age of victim`,nrow=1)+
  scale_color_manual(name=&amp;quot;&amp;quot;,values=c(&amp;quot;#CC6677&amp;quot;,&amp;quot;#4477AA&amp;quot;))+
  theme(legend.position = &amp;quot;top&amp;quot;)+
  labs(x=&amp;quot;&amp;quot;,y=&amp;quot;Rate per 100,000 population&amp;quot;,
       title=&amp;quot;Victims of police-reported violent crime&amp;quot;,
       subtitle=&amp;quot;Total, all ages&amp;quot;,
       caption=&amp;quot;Source: Statistics Canada NDM 35-10-0051\nChart by @bcshaffer&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-06-new-statscan-data-on-victims-of-violent-crime_files/figure-html/unnamed-chunk-3-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;There is concerning growth in the rate of violent crimes against teens. For some perspective, let‚Äôs see the same data in numbers of victim rather than rate. The bulk of crimes remains in the greater than 18 category, although growth is larger for teens, especially on a per capita basis.
&lt;img src=&#34;/post/2018-12-06-new-statscan-data-on-victims-of-violent-crime_files/figure-html/unnamed-chunk-4-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Now, let‚Äôs look at the rate of crime per 100,000 population by each violation type across each province. The list of violation types is:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;unique(data$Violations)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;quot;Total, all violations&amp;quot;                                        
## [2] &amp;quot;Violations causing death and attempted murder&amp;quot;                
## [3] &amp;quot;Sexual assaults, levels 1, 2, 3&amp;quot;                              
## [4] &amp;quot;Sexual violations against children&amp;quot;                           
## [5] &amp;quot;Assaults&amp;quot;                                                     
## [6] &amp;quot;Other violent violations&amp;quot;                                     
## [7] &amp;quot;Criminal Code traffic violations causing death or bodily harm&amp;quot;&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;breakdown-by-province&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Breakdown by Province&lt;/h2&gt;
&lt;p&gt;We start by only looking at the provinces, because the territory values blow up the y-axis. I‚Äôll come back to important data in the territories later. We aggregate across all ages, but split the data by sex.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Function to plot by sex (all ages) with violation type as input
# Excludes territories due to much higher rate (y-axis issues)
plotbysex &amp;lt;- function(v){
  plotdata &amp;lt;- data %&amp;gt;%
    filter( Violations==v,
            `Sex of victim`!=&amp;quot;Total, sex of victim&amp;quot;,
            `Sex of victim`!=&amp;quot;Sex of victim unknown&amp;quot;,
            `Age of victim`==&amp;quot;Total, age of victim&amp;quot;,
            Statistics==&amp;quot;Rate per 100,000 population&amp;quot;,
            !(GEO %in% c(&amp;quot;Canada&amp;quot;,&amp;quot;Northwest Territories&amp;quot;,&amp;quot;Nunavut&amp;quot;,&amp;quot;Yukon&amp;quot;))
            )
  ggplot(plotdata, aes(year,VALUE, group=`Sex of victim`, color=`Sex of victim`))+
    geom_line(size=1.5)+
    facet_wrap(~ GEO,nrow=2)+
    theme_light(12,&amp;quot;Avenir&amp;quot;)+
    scale_color_manual(name=&amp;quot;&amp;quot;,values=c(&amp;quot;#CC6677&amp;quot;,&amp;quot;#4477AA&amp;quot;))+
    scale_x_continuous(breaks=c(2010,2016))+
    theme(legend.position = &amp;quot;top&amp;quot;)+
    labs(x=&amp;quot;&amp;quot;,y=&amp;quot;Rate per 100,000 population&amp;quot;,
         title=&amp;quot;Victims of police-reported violent crime&amp;quot;,
         subtitle=paste0(v,&amp;quot;, all ages&amp;quot;),
         caption=&amp;quot;Source: Statistics Canada NDM 35-10-0051\nChart by @bcshaffer&amp;quot;)
}&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plotbysex(&amp;quot;Total, all violations&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-06-new-statscan-data-on-victims-of-violent-crime_files/figure-html/unnamed-chunk-7-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plotbysex(&amp;quot;Violations causing death and attempted murder&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-06-new-statscan-data-on-victims-of-violent-crime_files/figure-html/unnamed-chunk-7-2.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plotbysex(&amp;quot;Sexual assaults, levels 1, 2, 3&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-06-new-statscan-data-on-victims-of-violent-crime_files/figure-html/unnamed-chunk-7-3.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plotbysex(&amp;quot;Sexual violations against children&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-06-new-statscan-data-on-victims-of-violent-crime_files/figure-html/unnamed-chunk-7-4.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plotbysex(&amp;quot;Assaults&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-06-new-statscan-data-on-victims-of-violent-crime_files/figure-html/unnamed-chunk-7-5.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plotbysex(&amp;quot;Other violent violations&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-06-new-statscan-data-on-victims-of-violent-crime_files/figure-html/unnamed-chunk-7-6.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plotbysex(&amp;quot;Criminal Code traffic violations causing death or bodily harm&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-06-new-statscan-data-on-victims-of-violent-crime_files/figure-html/unnamed-chunk-7-7.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;the-territories&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;The Territories&lt;/h2&gt;
&lt;p&gt;Now, let‚Äôs look at the same data, but filtering only on the 3 territories and Canada for reference.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plotbysex.t(&amp;quot;Total, all violations&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-06-new-statscan-data-on-victims-of-violent-crime_files/figure-html/unnamed-chunk-9-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plotbysex.t(&amp;quot;Violations causing death and attempted murder&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-06-new-statscan-data-on-victims-of-violent-crime_files/figure-html/unnamed-chunk-9-2.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plotbysex.t(&amp;quot;Sexual assaults, levels 1, 2, 3&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-06-new-statscan-data-on-victims-of-violent-crime_files/figure-html/unnamed-chunk-9-3.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plotbysex.t(&amp;quot;Sexual violations against children&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-06-new-statscan-data-on-victims-of-violent-crime_files/figure-html/unnamed-chunk-9-4.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plotbysex.t(&amp;quot;Assaults&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-06-new-statscan-data-on-victims-of-violent-crime_files/figure-html/unnamed-chunk-9-5.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plotbysex.t(&amp;quot;Other violent violations&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-06-new-statscan-data-on-victims-of-violent-crime_files/figure-html/unnamed-chunk-9-6.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plotbysex.t(&amp;quot;Criminal Code traffic violations causing death or bodily harm&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-06-new-statscan-data-on-victims-of-violent-crime_files/figure-html/unnamed-chunk-9-7.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;breakdown-by-age&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Breakdown by Age&lt;/h2&gt;
&lt;p&gt;We can look at how the incidence of violent crime breaks down by age. Here we‚Äôll look at the Canada-wide numbers. A massive table (facet_grid) splitting it by age and region is possible, but gets messy quickly. I hide the function code here, but it is similar to the above function, with the exception that faceting is done by age rather than province, and I filter on Canada-wide data only.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plotbyage(&amp;quot;Total, all violations&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-06-new-statscan-data-on-victims-of-violent-crime_files/figure-html/unnamed-chunk-11-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plotbyage(&amp;quot;Violations causing death and attempted murder&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-06-new-statscan-data-on-victims-of-violent-crime_files/figure-html/unnamed-chunk-11-2.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plotbyage(&amp;quot;Sexual assaults, levels 1, 2, 3&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-06-new-statscan-data-on-victims-of-violent-crime_files/figure-html/unnamed-chunk-11-3.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plotbyage(&amp;quot;Sexual violations against children&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-06-new-statscan-data-on-victims-of-violent-crime_files/figure-html/unnamed-chunk-11-4.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plotbyage(&amp;quot;Assaults&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-06-new-statscan-data-on-victims-of-violent-crime_files/figure-html/unnamed-chunk-11-5.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plotbyage(&amp;quot;Other violent violations&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-06-new-statscan-data-on-victims-of-violent-crime_files/figure-html/unnamed-chunk-11-6.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plotbyage(&amp;quot;Criminal Code traffic violations causing death or bodily harm&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-06-new-statscan-data-on-victims-of-violent-crime_files/figure-html/unnamed-chunk-11-7.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;/div&gt;
&lt;div id=&#34;the-bottom-line&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;The Bottom Line:&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;The rate of violent crime, notably sexual assaults, remains extremely skewed towards women.&lt;/li&gt;
&lt;li&gt;The rate of violent crime causing death and attempted murder is skewed towards men but remains relatively low.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;The rate of sexual assaults towards young girls is high and alarmingly climbing.&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-12-06-new-statscan-data-on-victims-of-violent-crime_files/figure-html/sexual_assault_teens-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Gasoline demand: BC and the Rest of Canada</title>
      <link>/post/gasoline-demand-bc-and-the-rest-of-canada/</link>
      <pubDate>Fri, 30 Nov 2018 00:00:00 +0000</pubDate>
      <guid>/post/gasoline-demand-bc-and-the-rest-of-canada/</guid>
      <description>


&lt;p&gt;This post looks at gasoline demand across the Canadian provinces and territories. It was prompted by this tweet by &lt;span class=&#34;citation&#34;&gt;@sjmuir&lt;/span&gt;, noting that gasoline demand per capita in BC is unchanged since 2008, the year of implementation of the BC carbon tax.&lt;/p&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-lang=&#34;en&#34;&gt;
&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;
It&#39;s taboo to point this out, but the fact is that British Columbia residents used as much gasoline in 2017 as they did in 2008. That&#39;s why I&#39;m skeptical whenever it&#39;s stated that carbon pricing has led to some kind of revolution in fuel usage, because it hasn&#39;t. &lt;a href=&#34;https://t.co/3IPILHxnTw&#34;&gt;pic.twitter.com/3IPILHxnTw&lt;/a&gt;
&lt;/p&gt;
‚Äî Stewart Muir (&lt;span class=&#34;citation&#34;&gt;@sjmuir&lt;/span&gt;) &lt;a href=&#34;https://twitter.com/sjmuir/status/1068523879331586048?ref_src=twsrc%5Etfw&#34;&gt;November 30, 2018&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;p&gt;The data didn‚Äôt fit my prior as I had seen in a &lt;a href=&#34;https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2778868&#34;&gt;recent paper&lt;/a&gt; that shows BC gasoline demand per capita falling relative to the rest of Canada.&lt;/p&gt;
&lt;p&gt;So what gives?&lt;/p&gt;
&lt;p&gt;It turns out, a lot has changed since the above referenced paper. Namely, BC gasoline demand has risen quite a bit since 2015. Let‚Äôs dig in. I‚Äôll first plot the change in total gasoline demand in each province since 2008:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tidyverse)
library(lubridate)
library(cansim)
library(ggrepel)
library(ggthemes)

## GET EMPLOYMENT DATA
data.gas &amp;lt;- get_cansim(23100066) %&amp;gt;% 
  normalize_cansim_values() %&amp;gt;%
  filter(`Type of fuel sales`==&amp;quot;Net sales of gasoline&amp;quot;,
         GEO!=&amp;quot;Northwest Territories including Nunavut&amp;quot;) %&amp;gt;%
  mutate(Year=as.numeric(REF_DATE),
         Region = case_when(GEO %in% c(&amp;quot;British Columbia&amp;quot;,&amp;quot;Alberta&amp;quot;,&amp;quot;Saskatchewan&amp;quot;) ~ &amp;quot;West&amp;quot;,
                            GEO %in% c(&amp;quot;Manitoba&amp;quot;,&amp;quot;Ontario&amp;quot;,&amp;quot;Quebec&amp;quot;)  ~ &amp;quot;Central&amp;quot;,
                            GEO %in% c(&amp;quot;New Brunswick&amp;quot;,&amp;quot;Nova Scotia&amp;quot;,&amp;quot;Prince Edward Island&amp;quot;,&amp;quot;Newfoundland and Labrador&amp;quot;) ~ &amp;quot;East&amp;quot;,
                            GEO %in% c(&amp;quot;Yukon&amp;quot;,&amp;quot;Northwest Territories&amp;quot;,&amp;quot;Nunavut&amp;quot;) ~ &amp;quot;Territories&amp;quot;,
                            GEO==&amp;quot;Canada&amp;quot; ~ &amp;quot;CANADA&amp;quot;),
         GEO.abb = case_when(GEO==&amp;quot;British Columbia&amp;quot; ~ &amp;quot;BC&amp;quot;,
                             GEO==&amp;quot;Alberta&amp;quot; ~ &amp;quot;AB&amp;quot;,
                             GEO==&amp;quot;Saskatchewan&amp;quot; ~ &amp;quot;SK&amp;quot;,
                             GEO==&amp;quot;Manitoba&amp;quot; ~ &amp;quot;MB&amp;quot;,
                             GEO==&amp;quot;Ontario&amp;quot; ~ &amp;quot;ON&amp;quot;,
                             GEO==&amp;quot;Quebec&amp;quot; ~ &amp;quot;QC&amp;quot;,
                             GEO==&amp;quot;New Brunswick&amp;quot; ~ &amp;quot;NB&amp;quot;,
                             GEO==&amp;quot;Nova Scotia&amp;quot; ~ &amp;quot;NS&amp;quot;,
                             GEO==&amp;quot;Prince Edward Island&amp;quot; ~ &amp;quot;PE&amp;quot;,
                             GEO==&amp;quot;Newfoundland and Labrador&amp;quot; ~ &amp;quot;NL&amp;quot;,
                             GEO==&amp;quot;Yukon&amp;quot; ~ &amp;quot;YT&amp;quot;,
                             GEO==&amp;quot;Northwest Territories&amp;quot; ~ &amp;quot;NT&amp;quot;,
                             GEO==&amp;quot;Nunavut&amp;quot; ~ &amp;quot;NU&amp;quot;,
                             GEO==&amp;quot;Canada&amp;quot; ~ &amp;quot;CAN&amp;quot;)) %&amp;gt;%
  group_by(GEO) %&amp;gt;%
  mutate(Index=VALUE/VALUE[Year==2008]) %&amp;gt;%
  dplyr::select(Year,Date,GEO,GEO.abb,Region,Index,&amp;quot;Gasoline&amp;quot;=VALUE)
data.gas$Region &amp;lt;- factor(data.gas$Region, levels=c(&amp;quot;CANADA&amp;quot;,&amp;quot;West&amp;quot;,&amp;quot;Central&amp;quot;,&amp;quot;East&amp;quot;,&amp;quot;Territories&amp;quot;))

ggplot()+
  geom_line(data=data.gas %&amp;gt;% filter(GEO!=&amp;quot;Canada&amp;quot;,GEO!=&amp;quot;Nunavut&amp;quot;,GEO!=&amp;quot;British Columbia&amp;quot;), 
            aes(Year,Index,group=GEO,color=GEO),
            size=1)+
  geom_line(data=data.gas %&amp;gt;% filter(GEO==&amp;quot;British Columbia&amp;quot;),
            aes(Year,Index),
            size=2, color=&amp;quot;firebrick&amp;quot;)+
  geom_label_repel(data=data.gas %&amp;gt;% filter(Year==2017,GEO!=&amp;quot;Canada&amp;quot;,GEO!=&amp;quot;Nunavut&amp;quot;,GEO!=&amp;quot;British Columbia&amp;quot;),
                   aes(Year, Index, color=GEO, label=GEO.abb),
                   nudge_x=.5)+
  geom_label_repel(data=data.gas %&amp;gt;% filter(Year==2017,GEO==&amp;quot;British Columbia&amp;quot;), 
                   aes(Year, Index, label=GEO.abb),
                   nudge_x=.5, color=&amp;quot;firebrick&amp;quot;)+
  geom_hline(yintercept = 1,linetype=&amp;quot;dashed&amp;quot;)+
  scale_y_continuous(labels=scales::percent)+
  scale_x_continuous(breaks=seq(2008,2018,2),limits=c(2008,2018))+
  coord_cartesian(ylim=c(.95,1.4))+
  scale_color_viridis_d(name=&amp;quot;&amp;quot;)+
  theme_classic(14,&amp;quot;Gill Sans&amp;quot;)+
  theme(plot.caption=element_text(size=8,face=&amp;quot;italic&amp;quot;),
        legend.position = &amp;quot;none&amp;quot;)+
  labs(x=&amp;quot;&amp;quot;,y=&amp;quot;&amp;quot;,
       subtitle=&amp;quot;Gasoline demand relative to 2008 (unadjusted for population)&amp;quot;,
       caption=&amp;quot;Statistics Canada NDM Table 23-10-0066\nChart by @bcshaffer&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-11-30-gasoline-demand-bc-and-the-rest-of-canada_files/figure-html/gasoline_index-1.png&#34; width=&#34;768&#34; /&gt;&lt;/p&gt;
&lt;p&gt;It‚Äôs a busy chart but there‚Äôs a few things to note:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;Sask is guzzling the stuff. This isn‚Äôt per capita yet, but still!&lt;/li&gt;
&lt;li&gt;Meanwhile, BC, which showed a big dip in 2011-2014 has come roaring back.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The above chart isn‚Äôt per capita. So let‚Äôs get quarterly population estimates, annualize them, and create a gasoline_per_capita variable:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;## GET POPULATION DATA
data.population &amp;lt;- get_cansim(0510005) %&amp;gt;% 
  normalize_cansim_values() %&amp;gt;%
  mutate(Year=year(Date)) %&amp;gt;%
  dplyr::select(Year,GEO,&amp;quot;Population&amp;quot;=VALUE) %&amp;gt;%
  group_by(GEO,Year) %&amp;gt;%
  summarise(Population=mean(Population)) 

## Merge and plot
plotdata &amp;lt;- left_join(data.gas,data.population,by=c(&amp;quot;Year&amp;quot;,&amp;quot;GEO&amp;quot;))
plotdata$gas_per_cap &amp;lt;- plotdata$Gasoline/plotdata$Population/365
ggplot(plotdata, aes(Year,gas_per_cap,group=GEO,color=GEO,label=GEO.abb))+
  geom_line(size=1.5)+
  geom_vline(xintercept = 2008,linetype=&amp;quot;dashed&amp;quot;)+
  geom_label_repel(data=plotdata %&amp;gt;% filter(Year==2017),nudge_x=.5)+
  facet_wrap(~Region,nrow=1)+
  scale_x_continuous(breaks=seq(2008,2018,4),limits=c(2008,2019))+
  scale_color_viridis_d(name=&amp;quot;&amp;quot;,option=&amp;quot;B&amp;quot;)+
  theme_classic(14,&amp;quot;Gill Sans&amp;quot;)+
  theme(plot.caption=element_text(size=8,face=&amp;quot;italic&amp;quot;),
        legend.position = &amp;quot;none&amp;quot;)+
  labs(x=&amp;quot;&amp;quot;,y=&amp;quot;Litres per day&amp;quot;,
       subtitle=&amp;quot;Per capita gasoline demand&amp;quot;,
       caption=&amp;quot;Statistics Canada NDM Table 23-10-0066 and 17-10-0009\nChart by @bcshaffer&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-11-30-gasoline-demand-bc-and-the-rest-of-canada_files/figure-html/per_capita-1.png&#34; width=&#34;960&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Another question, is how different economic growth‚Äìrather than just population growth‚Äìacross provinces impacts their gasoline demand. So here we look at &lt;em&gt;gasoline intensity&lt;/em&gt;, the ratio of annual gasoline demand (in litres) per thousand dollars of GDP. (Note: I drop the territories as their scale gets wonky. Sorry Territories‚Ä¶)&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;## GET GDP DATA
data.GDP &amp;lt;- get_cansim(36100222) %&amp;gt;% 
  normalize_cansim_values() %&amp;gt;%
  filter(Prices==&amp;quot;Chained (2012) dollars&amp;quot;,
         Estimates==&amp;quot;Gross domestic product at market prices&amp;quot;) %&amp;gt;%
  mutate(Year=year(Date)) %&amp;gt;%
  dplyr::select(Year,GEO,&amp;quot;GDP&amp;quot;=VALUE) 

plotdata &amp;lt;- left_join(plotdata,data.GDP, by=c(&amp;quot;Year&amp;quot;,&amp;quot;GEO&amp;quot;))
plotdata$gas_intensity &amp;lt;- plotdata$Gasoline / plotdata$GDP * 1000
plotdata &amp;lt;- plotdata %&amp;gt;% filter(Region!=&amp;quot;Territories&amp;quot;)

ggplot(plotdata, aes(Year,gas_intensity,group=GEO,color=GEO,label=GEO.abb))+
  geom_line(size=1.5)+
  geom_vline(xintercept = 2008,linetype=&amp;quot;dashed&amp;quot;)+
  geom_label_repel(data=plotdata %&amp;gt;% filter(Year==2017),nudge_x=1)+
  facet_wrap(~Region,nrow=1)+
  scale_x_continuous(breaks=seq(1995,2015,10),limits=c(1994,2020))+
  coord_cartesian(ylim=c(16,45))+
  scale_color_viridis_d(name=&amp;quot;&amp;quot;,option=&amp;quot;B&amp;quot;)+
  theme_classic(14,&amp;quot;Gill Sans&amp;quot;)+
  theme(plot.caption=element_text(size=8,face=&amp;quot;italic&amp;quot;),
        legend.position = &amp;quot;none&amp;quot;)+
  labs(x=&amp;quot;&amp;quot;,y=&amp;quot;L per $1000 GDP&amp;quot;,
       subtitle=&amp;quot;Gasoline intensity\n(Gas demand / GDP)&amp;quot;,
       caption=&amp;quot;Statistics Canada NDM Table 23-10-0066 and 36-10-0222\nChart by @bcshaffer&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-11-30-gasoline-demand-bc-and-the-rest-of-canada_files/figure-html/gasoline_intensity-1.png&#34; width=&#34;960&#34; /&gt;&lt;/p&gt;
&lt;p&gt;It‚Äôs a little hard to tell in that graph, but in the &lt;strong&gt;West&lt;/strong&gt; plot, BC is the line that starts highest and is falling rapidly throughout the period. I‚Äôll re-plot it on one panel here:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;ggplot()+
  geom_line(data=plotdata %&amp;gt;% filter(GEO!=&amp;quot;Nunavut&amp;quot;,GEO!=&amp;quot;British Columbia&amp;quot;), 
            aes(Year,gas_intensity,group=GEO,color=GEO),
            size=1)+
  geom_line(data=plotdata %&amp;gt;% filter(GEO==&amp;quot;British Columbia&amp;quot;),
            aes(Year,gas_intensity),
            size=2, color=&amp;quot;firebrick&amp;quot;)+
  geom_label_repel(data=plotdata %&amp;gt;% filter(Year==2017,GEO!=&amp;quot;Nunavut&amp;quot;,GEO!=&amp;quot;British Columbia&amp;quot;),
                   aes(Year, gas_intensity, color=GEO, label=GEO.abb),
                   nudge_x=1)+
  geom_label_repel(data=plotdata %&amp;gt;% filter(Year==2017,GEO==&amp;quot;British Columbia&amp;quot;), 
                   aes(Year, gas_intensity, label=GEO.abb),
                   nudge_x=.5, color=&amp;quot;firebrick&amp;quot;)+
  geom_vline(xintercept = 2008,linetype=&amp;quot;dashed&amp;quot;)+
  scale_x_continuous(breaks=seq(1995,2015,10),limits=c(1994,2020))+
  coord_cartesian(ylim=c(16,48))+
  scale_color_viridis_d(name=&amp;quot;&amp;quot;)+
  theme_classic(14,&amp;quot;Gill Sans&amp;quot;)+
  theme(plot.caption=element_text(size=8,face=&amp;quot;italic&amp;quot;),
        legend.position = &amp;quot;none&amp;quot;)+
  labs(x=&amp;quot;&amp;quot;,y=&amp;quot;L per $1000 GDP&amp;quot;,
       subtitle=&amp;quot;Gasoline intensity\n(Gas demand / GDP)&amp;quot;,
       caption=&amp;quot;Statistics Canada NDM Table 23-10-0066 and 36-10-0222\nChart by @bcshaffer&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-11-30-gasoline-demand-bc-and-the-rest-of-canada_files/figure-html/gas_intensity_one_chart-1.png&#34; width=&#34;576&#34; /&gt;&lt;/p&gt;
&lt;p&gt;To summarise, and make it clearer, let‚Äôs take a look at just BC and Canada side by side for both gasoline intensity and gasoline per capita:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data.summary &amp;lt;- plotdata %&amp;gt;%
  filter(GEO %in% c(&amp;quot;British Columbia&amp;quot;,&amp;quot;Canada&amp;quot;)) %&amp;gt;%
  dplyr::select(Year,GEO,GEO.abb,gas_per_cap,gas_intensity) %&amp;gt;%
  gather(key,value,gas_per_cap,gas_intensity)

ggplot(data.summary, aes(Year,value,group=GEO,color=GEO))+
  geom_line(size=1.5)+
  geom_vline(xintercept = 2008,linetype=&amp;quot;dashed&amp;quot;)+
  facet_wrap(~key,scales=&amp;quot;free_y&amp;quot;)+
  scale_x_continuous(breaks=seq(1995,2015,5))+
  scale_color_manual(name=&amp;quot;&amp;quot;,values=c(&amp;quot;forestgreen&amp;quot;,&amp;quot;red&amp;quot;))+
  theme_classic(12,&amp;quot;Gill Sans&amp;quot;)+
  theme(plot.caption=element_text(size=8,face=&amp;quot;italic&amp;quot;),
        legend.position = &amp;quot;top&amp;quot;,
        legend.text = element_text(size=14),
        strip.text = element_text(size=12))+
  labs(x=&amp;quot;&amp;quot;,y=&amp;quot;&amp;quot;,
       subtitle=&amp;quot;gas_intensity: L/GDP ($&amp;#39;000s)\ngas_per_cap: L/capita/day&amp;quot;,
       title=&amp;quot;BC vs the Rest of Canada&amp;quot;,
       caption=&amp;quot;Statistics Canada NDM Table 23-10-0066, 36-10-0222, 17-10-0009\nChart by @bcshaffer&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-11-30-gasoline-demand-bc-and-the-rest-of-canada_files/figure-html/gas_summary-1.png&#34; width=&#34;768&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Bottom line: gasoline intensity (the amount of gasoline demand per $1000 of GDP) is falling across the board. That‚Äôs a good thing. B.C.‚Äôs gasoline intensity is falling more rapidly than the Canadian average. On a per capita basis, despite rising in the past 2 years on the back of strong GDP growth, BC is still falling relative to the Canadian average.&lt;/strong&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Social assistance and unemployment duration in Alberta</title>
      <link>/post/caseload-duration/</link>
      <pubDate>Fri, 30 Nov 2018 00:00:00 +0000</pubDate>
      <guid>/post/caseload-duration/</guid>
      <description>


&lt;p&gt;In this post, I consider the relationship between &lt;strong&gt;Social Assistance Caseloads&lt;/strong&gt; and &lt;strong&gt;Unemployment Duration&lt;/strong&gt; in Alberta.&lt;/p&gt;
&lt;p&gt;Let‚Äôs start by calling the necessary libraries&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tidyverse)
library(zoo)
library(cansim) #Big thanks to Jens von Bergmann and Dmitry Shkolnik for this package!&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;first-get-caseload-data-from-open.alberta.ca&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;First, get CASELOAD data from open.alberta.ca&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data.caseload &amp;lt;-read.csv(&amp;quot;https://open.alberta.ca/dataset/e1ec585f-3f52-40f2-a022-5a38ea3397e5/resource/4f97a3ae-1b3a-48e9-a96f-f65c58526e07/download/GOAIncomeSupportCSVv61.02017-05-15.csv&amp;quot;)
data.caseload &amp;lt;- data.caseload %&amp;gt;%
  mutate(Date = as.Date(as.yearmon(Ref_Date,&amp;quot;%b-%y&amp;quot;))) %&amp;gt;%
  filter(Geography==&amp;quot;Alberta&amp;quot;) %&amp;gt;%
  dplyr::select(&amp;quot;Caseloads&amp;quot;=Value,Date,Measure)

data.caseload.total &amp;lt;- data.caseload %&amp;gt;%
  filter(Measure==&amp;quot;Total Caseload&amp;quot;) %&amp;gt;%
  dplyr::select(Caseloads,Date)

ggplot(data.caseload.total, aes(Date,Caseloads))+geom_line() #check data&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-11-29-caseload-duration_files/figure-html/unnamed-chunk-2-1.png&#34; width=&#34;384&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;second-get-duration-data-from-statistics-canada&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Second, get DURATION data from Statistics Canada&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data.duration &amp;lt;- get_cansim(2820047) %&amp;gt;% normalize_cansim_values()
data.duration &amp;lt;- data.duration %&amp;gt;%
  filter(GEO==&amp;quot;Alberta&amp;quot;,
         `Duration of unemployment`==&amp;quot;Average weeks unemployed, no top-code&amp;quot;,
         Sex==&amp;quot;Both sexes&amp;quot;,
         `Age group`==&amp;quot;15 years and over&amp;quot;,
         Date&amp;gt;=&amp;quot;2005-04-01&amp;quot;) %&amp;gt;%
  dplyr::select(&amp;quot;Duration&amp;quot;=VALUE,Date)
ggplot(data.duration, aes(Date,Duration))+geom_line() #check data&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-11-29-caseload-duration_files/figure-html/unnamed-chunk-3-1.png&#34; width=&#34;384&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;now-gather-into-long-format-and-do-a-quick-plot&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Now, gather into long format and do a quick plot&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plotdata &amp;lt;- merge(data.duration, data.caseload.total, by=&amp;quot;Date&amp;quot;)
plotdata &amp;lt;- gather(plotdata,key,value,2:3)
ggplot(plotdata, aes(Date,value))+
  geom_line()+
  facet_wrap(~key,scales=&amp;quot;free_y&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-11-29-caseload-duration_files/figure-html/unnamed-chunk-4-1.png&#34; width=&#34;960&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;now-do-a-pretty-plot-with-scatter-points-and-smoothes&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Now, do a pretty plot with scatter points and smoothes&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plotdata$key[plotdata$key==&amp;quot;Caseloads&amp;quot;] &amp;lt;- &amp;quot;Caseloads (people)&amp;quot;
plotdata$key[plotdata$key==&amp;quot;Duration&amp;quot;] &amp;lt;- &amp;quot;Duration (weeks)&amp;quot;

ggplot(plotdata, aes(Date,value))+
  geom_point(alpha=.5)+
  geom_smooth(span=.3)+
  facet_wrap(~key,scales=&amp;quot;free_y&amp;quot;)+
  theme_light(12,&amp;quot;Avenir&amp;quot;)+
  theme(plot.caption = element_text(size=8),
        strip.text = element_text(size=12),
        panel.spacing = unit(1,&amp;quot;cm&amp;quot;))+
  labs(x=&amp;quot;&amp;quot;,
       y=&amp;quot;&amp;quot;,
       title=&amp;quot;Similar trends between caseloads and unemployment duration&amp;quot;,
       caption=&amp;quot;Caseload data through Sep-18; Duration data through Oct-18
       Sources: https://open.alberta.ca/dataset/income-support-caseload-alberta and CANSIM 282-0047
       Chart by Blake Shaffer (@bcshaffer)&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-11-29-caseload-duration_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;960&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;we-can-also-dig-deeper-into-the-caseload-data&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;We can also dig deeper into the caseload data&lt;/h2&gt;
&lt;p&gt;First, let‚Äôs look at caseload recipients by family types&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# first filter on the family type categories
data.caseload.family &amp;lt;- data.caseload %&amp;gt;%
  filter(Measure %in% c(&amp;quot;Single Individuals Total&amp;quot;,&amp;quot;Lone-parent Families Total&amp;quot;,&amp;quot;Couples with Children Total&amp;quot;,&amp;quot;Couples without Children Total&amp;quot;))

# clean up the category names, not necessary
library(tm)
data.caseload.family$Measure &amp;lt;- as.character(data.caseload.family$Measure)
data.caseload.family$Measure &amp;lt;- removeWords(data.caseload.family$Measure,&amp;quot;Total&amp;quot;)
  
# now plot it!
ggplot(data.caseload.family, aes(Date,Caseloads))+
  geom_line(size=1.5,color=&amp;quot;firebrick&amp;quot;)+
  facet_wrap(~Measure,nrow=1)+
  scale_y_continuous(expand=c(0,0),limits=c(0,45000))+
  theme_light(12,&amp;quot;Avenir&amp;quot;)+
  theme(plot.caption = element_text(size=8),
        strip.text = element_text(size=12),
        panel.grid.major.x = element_blank(),
        panel.grid.minor.x = element_blank(),
        panel.grid.minor.y = element_blank())+
  labs(x=&amp;quot;&amp;quot;,
       y=&amp;quot;&amp;quot;,
       title=&amp;quot;Alberta social assistance caseloads by recipient&amp;#39;s family type&amp;quot;,
       caption=&amp;quot;Caseload data through Sep-18
       Source: https://open.alberta.ca/dataset/income-support-caseload-alberta
       Chart by Blake Shaffer (@bcshaffer)&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-11-29-caseload-duration_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;960&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Now let‚Äôs look at the caseload data in terms of type of worker&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;data.caseload.worker &amp;lt;- data.caseload %&amp;gt;%
  filter(Measure %in% c(&amp;quot;ETW - Working Total&amp;quot;,
                        &amp;quot;ETW - Not Working (Available for Work) Total&amp;quot;,
                        &amp;quot;ETW - Not Working (Unavailable for Work) Total&amp;quot;,
                        &amp;quot;BFE - Total&amp;quot;))

# clean up the category names
data.caseload.worker &amp;lt;- data.caseload.worker %&amp;gt;%
  mutate(Measure=fct_recode(Measure,
                            &amp;quot;Working&amp;quot; = &amp;quot;ETW - Working Total&amp;quot;,
                            &amp;quot;Available for Work&amp;quot; = &amp;quot;ETW - Not Working (Available for Work) Total&amp;quot;,
                            &amp;quot;Unavailable for Work&amp;quot; = &amp;quot;ETW - Not Working (Unavailable for Work) Total&amp;quot;,
                            &amp;quot;Barriers to FT employment&amp;quot; = &amp;quot;BFE - Total&amp;quot;))

# now plot it!
ggplot(data.caseload.worker, aes(Date,Caseloads))+
  geom_line(size=1.5,color=&amp;quot;royalblue&amp;quot;)+
  facet_wrap(~Measure,nrow=1)+
  scale_y_continuous(expand=c(0,0),limits=c(0,45000))+
  theme_light(12,&amp;quot;Avenir&amp;quot;)+
  theme(plot.caption = element_text(size=8),
        strip.text = element_text(size=12),
        panel.grid.major.x = element_blank(),
        panel.grid.minor.x = element_blank(),
        panel.grid.minor.y = element_blank())+
  labs(x=&amp;quot;&amp;quot;,
       y=&amp;quot;&amp;quot;,
       title=&amp;quot;Alberta social assistance caseloads by recipient&amp;#39;s worker type&amp;quot;,
       caption=&amp;quot;Caseload data through Sep-18
       Source: https://open.alberta.ca/dataset/income-support-caseload-alberta
       Chart by Blake Shaffer (@bcshaffer)&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-11-29-caseload-duration_files/figure-html/unnamed-chunk-7-1.png&#34; width=&#34;960&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;bottom-line&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Bottom line:&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;The bulk of the growth in caseloads has been &lt;em&gt;Single Individuals&lt;/em&gt; that are &lt;em&gt;Available for Work&lt;/em&gt;. This also coincides with a large growth in &lt;em&gt;Unemployment Duration&lt;/em&gt;. This suggests workers that are seeing their unemployment benefits expire may be turning to other forms of social assistance. More details on income support recipients would help policy makers respond effectively.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;h/t to &lt;span class=&#34;citation&#34;&gt;@ronkneebone&lt;/span&gt; for raising attention to this important data.&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Blogging Charts!</title>
      <link>/post/charts/</link>
      <pubDate>Thu, 29 Nov 2018 00:00:00 +0000</pubDate>
      <guid>/post/charts/</guid>
      <description>


&lt;p&gt;I like to make charts.&lt;/p&gt;
&lt;p&gt;I often post them on Twitter (&lt;span class=&#34;citation&#34;&gt;@bcshaffer&lt;/span&gt;). I thought I might start posting some of them on my website as a way for me to (a) learn to use R Markdown and (b) share some of my R code that creates these charts for others who are interested in learning.&lt;/p&gt;
&lt;p&gt;Note: Both my R code and especially my nascent R Markdown skills are still rough. I‚Äôm sure much of it isn‚Äôt ‚Äúbest practice‚Äù. Far from it. It‚Äôs what I like to call ‚Äògets it done‚Äô code. So learn what you can, and apologies for creating bad habits!&lt;/p&gt;
&lt;p&gt;&lt;em&gt;- Blake&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Resources:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;I learned R primarily from Hadley Wickham and Garrett Grolemund‚Äôs book: &lt;a href=&#34;https://r4ds.had.co.nz/&#34;&gt;R for Data Science&lt;/a&gt;. I highly recommend it. It assumes zero previous R knowledge, even guiding you through where to download the required software, and gets you up and running in no time.&lt;/p&gt;
&lt;p&gt;For data visualization tips, I really like Claus Wilke‚Äôs online book: &lt;a href=&#34;https://serialmentor.com/dataviz/&#34;&gt;Fundamentals of Data Visualization&lt;/a&gt; (with code examples!).&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Privacy Policy</title>
      <link>/privacy/</link>
      <pubDate>Thu, 28 Jun 2018 00:00:00 +0100</pubDate>
      <guid>/privacy/</guid>
      <description>&lt;p&gt;&amp;hellip;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Terms</title>
      <link>/terms/</link>
      <pubDate>Thu, 28 Jun 2018 00:00:00 +0100</pubDate>
      <guid>/terms/</guid>
      <description>&lt;p&gt;&amp;hellip;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>All‚Äôs Well that Ends Well: Addressing End-of-Life Liabilities for Oil and Gas Wells</title>
      <link>/publication/cdhi2017/</link>
      <pubDate>Fri, 01 Sep 2017 00:00:00 +0000</pubDate>
      <guid>/publication/cdhi2017/</guid>
      <description></description>
    </item>
    
    <item>
      <title>The Challenge of Integrating Renewable Generation in the Alberta Electricity Market</title>
      <link>/publication/spp_electricityroundtable_summarypaper_2016/</link>
      <pubDate>Thu, 01 Sep 2016 00:00:00 +0000</pubDate>
      <guid>/publication/spp_electricityroundtable_summarypaper_2016/</guid>
      <description></description>
    </item>
    
    <item>
      <title>External Project</title>
      <link>/project/external-project/</link>
      <pubDate>Wed, 27 Apr 2016 00:00:00 +0000</pubDate>
      <guid>/project/external-project/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Internal Project</title>
      <link>/project/internal-project/</link>
      <pubDate>Wed, 27 Apr 2016 00:00:00 +0000</pubDate>
      <guid>/project/internal-project/</guid>
      <description>&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.&lt;/p&gt;
&lt;p&gt;Nullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.&lt;/p&gt;
&lt;p&gt;Cras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.&lt;/p&gt;
&lt;p&gt;Suspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.&lt;/p&gt;
&lt;p&gt;Aliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>The Political Economy of Free Allocations in Revenue Recycling: Six Position Papers on the Options for Recycling Carbon Pricing Revenue</title>
      <link>/publication/ecofiscal2016/</link>
      <pubDate>Fri, 01 Apr 2016 00:00:00 +0000</pubDate>
      <guid>/publication/ecofiscal2016/</guid>
      <description></description>
    </item>
    
    <item>
      <title>Lifting the hood on Alberta‚Äôs royalty review</title>
      <link>/publication/spp_royaltyreview_2016/</link>
      <pubDate>Mon, 01 Feb 2016 00:00:00 +0000</pubDate>
      <guid>/publication/spp_royaltyreview_2016/</guid>
      <description></description>
    </item>
    
    <item>
      <title>An example journal article</title>
      <link>/old-not-used/publication/journal-article/</link>
      <pubDate>Tue, 01 Sep 2015 00:00:00 +0000</pubDate>
      <guid>/old-not-used/publication/journal-article/</guid>
      <description>&lt;div class=&#34;alert alert-note&#34;&gt;
  &lt;div&gt;
    Click the &lt;em&gt;Cite&lt;/em&gt; button above to demo the feature to enable visitors to import publication metadata into their reference management software.
  &lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;alert alert-note&#34;&gt;
  &lt;div&gt;
    Click the &lt;em&gt;Slides&lt;/em&gt; button above to demo Academic&amp;rsquo;s Markdown slides feature.
  &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Supplementary notes can be added here, including 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/writing-markdown-latex/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;code and math&lt;/a&gt;.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>An example conference paper</title>
      <link>/old-not-used/publication/conference-paper/</link>
      <pubDate>Mon, 01 Jul 2013 00:00:00 +0000</pubDate>
      <guid>/old-not-used/publication/conference-paper/</guid>
      <description>&lt;div class=&#34;alert alert-note&#34;&gt;
  &lt;div&gt;
    Click the &lt;em&gt;Cite&lt;/em&gt; button above to demo the feature to enable visitors to import publication metadata into their reference management software.
  &lt;/div&gt;
&lt;/div&gt;
&lt;div class=&#34;alert alert-note&#34;&gt;
  &lt;div&gt;
    Click the &lt;em&gt;Slides&lt;/em&gt; button above to demo Academic&amp;rsquo;s Markdown slides feature.
  &lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Supplementary notes can be added here, including 
&lt;a href=&#34;https://sourcethemes.com/academic/docs/writing-markdown-latex/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;code and math&lt;/a&gt;.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Preliminary Results of the London Congestion Charging Scheme</title>
      <link>/publication/pwmp2004/</link>
      <pubDate>Fri, 01 Oct 2004 00:00:00 +0000</pubDate>
      <guid>/publication/pwmp2004/</guid>
      <description></description>
    </item>
    
  </channel>
</rss>
