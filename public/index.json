[{"authors":["admin"],"categories":null,"content":"Blake Shaffer is an assistant professor in the department of economics and school of public policy at the University of Calgary. His work focusses on electricity markets, climate policy and energy transitions. He uses empirical methods to evaluate policy effectiveness and better understand consumer and firm behaviour.\nPrior to returning to academia, Shaffer had a 15 year career in energy trading, specializing in electricity, natural gas and emissions markets. He holds a PhD in economics from the University of Calgary, Master of Philosophy in economics from the University of Cambridge and a bachelor‚Äôs degree in environmental sciences from Queen‚Äôs University. He has recently held visiting scholar and Fulbright postdoctoral scholar positions at the Toulouse School of Economics and Stanford University.\nHis recent research has been published in the American Economic Journal: Economic Policy, Canadian Journal of Economics and the Energy Journal. His popular writing has appeared in the Globe and Mail, Maclean‚Äôs, Postmedia, CBC, and other media outlets. Shaffer has also served as policy advisor for the governments of Alberta, British Columbia and Canada on various energy and environmental policy matters.\n","date":1585699200,"expirydate":-62135596800,"kind":"taxonomy","lang":"en","lastmod":1585699200,"objectID":"2525497d367e79493fd32b198b28f040","permalink":"/authors/admin/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/authors/admin/","section":"authors","summary":"Blake Shaffer is an assistant professor in the department of economics and school of public policy at the University of Calgary. His work focusses on electricity markets, climate policy and energy transitions.","tags":null,"title":"Blake Shaffer","type":"authors"},{"authors":null,"categories":null,"content":"Flexibility This feature can be used for publishing content such as:\n Online courses Project or software documentation Tutorials  The courses folder may be renamed. For example, we can rename it to docs for software/project documentation or tutorials for creating an online course.\nDelete tutorials To remove these pages, delete the courses folder and see below to delete the associated menu link.\nUpdate site menu After renaming or deleting the courses folder, you may wish to update any [[main]] menu links to it by editing your menu configuration at config/_default/menus.toml.\nFor example, if you delete this folder, you can remove the following from your menu configuration:\n[[main]] name = \u0026quot;Courses\u0026quot; url = \u0026quot;courses/\u0026quot; weight = 50  Or, if you are creating a software documentation site, you can rename the courses folder to docs and update the associated Courses menu configuration to:\n[[main]] name = \u0026quot;Docs\u0026quot; url = \u0026quot;docs/\u0026quot; weight = 50  Update the docs menu If you use the docs layout, note that the name of the menu in the front matter should be in the form [menu.X] where X is the folder name. Hence, if you rename the courses/example/ folder, you should also rename the menu definitions in the front matter of files within courses/example/ from [menu.example] to [menu.\u0026lt;NewFolderName\u0026gt;].\n","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"59c3ce8e202293146a8a934d37a4070b","permalink":"/courses/example/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/courses/example/","section":"courses","summary":"Learn how to use Academic's docs layout for publishing online courses, software documentation, and tutorials.","tags":null,"title":"Overview","type":"docs"},{"authors":null,"categories":null,"content":"In this tutorial, I\u0026rsquo;ll share my top 10 tips for getting started with Academic:\nTip 1 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\nTip 2 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\n","date":1557010800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1557010800,"objectID":"74533bae41439377bd30f645c4677a27","permalink":"/courses/example/example1/","publishdate":"2019-05-05T00:00:00+01:00","relpermalink":"/courses/example/example1/","section":"courses","summary":"In this tutorial, I\u0026rsquo;ll share my top 10 tips for getting started with Academic:\nTip 1 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum.","tags":null,"title":"Example Page 1","type":"docs"},{"authors":null,"categories":null,"content":"Here are some more tips for getting started with Academic:\nTip 3 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\nTip 4 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\n","date":1557010800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1557010800,"objectID":"1c2b5a11257c768c90d5050637d77d6a","permalink":"/courses/example/example2/","publishdate":"2019-05-05T00:00:00+01:00","relpermalink":"/courses/example/example2/","section":"courses","summary":"Here are some more tips for getting started with Academic:\nTip 3 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum.","tags":null,"title":"Example Page 2","type":"docs"},{"authors":[],"categories":null,"content":" Click on the Slides button above to view the built-in slides feature.   Slides can be added in a few ways:\n Create slides using Academic\u0026rsquo;s Slides feature and link using slides parameter in the front matter of the talk file Upload an existing slide deck to static/ and link using url_slides parameter in the front matter of the talk file Embed your slides (e.g. Google Slides) or presentation video on this page using shortcodes.  Further talk details can easily be added to this page using Markdown and $\\rm \\LaTeX$ math code.\n","date":1906549200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1906549200,"objectID":"96344c08df50a1b693cc40432115cbe3","permalink":"/talk/example/","publishdate":"2017-01-01T00:00:00Z","relpermalink":"/talk/example/","section":"talk","summary":"An example talk using Academic's Markdown slides feature.","tags":[],"title":"Example Talk","type":"talk"},{"authors":["Blake Shaffer","Mokhtar Tabari"],"categories":null,"content":"","date":1585699200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1585699200,"objectID":"e061f582d1a7eecc59743de8831e3483","permalink":"/publication/shaffertabariwp2020/","publishdate":"2020-04-01T00:00:00Z","relpermalink":"/publication/shaffertabariwp2020/","section":"publication","summary":"Energy storage has long been viewed as a solution to the growing challenge of intermittent electricity supply. However, energy storage deployment remains limited despite falling costs. One reason for this is current market rules inadequately compensate storage for all the value it can provide. A recent policy change in the United States seeks to rectify this situation by requiring grid operators to compensate providers of frequency regulation services based on speed and accuracy. This seemingly subtle change has a beneficial effect for fast-acting storage resources. Using a difference-in-differences method, exploiting the fact the Order covers a subset of U.S. electricity regions, we find a greater than 30% increase in the number of storage projects in the covered regions. This result highlights the importance of getting prices right and the material effect properly reflecting the value of storage can have on storage deployment.","tags":["energy storage","frequency regulation"],"title":"Paying for performance: The role of policy in energy storage deployment","type":"publication"},{"authors":["Blake Shaffer"],"categories":null,"content":"","date":1572566400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1572566400,"objectID":"2ac76c2a3442f37353f837c0bd1d9ae0","permalink":"/publication/cje2019/","publishdate":"2019-11-01T00:00:00Z","relpermalink":"/publication/cje2019/","section":"publication","summary":"The primary rationale for daylight saving time (DST) has long been energy savings. Whether it achieves this goal, however, remains a subject of debate. Recent studies, examining only one location at a time, have shown DST to increase, decrease or leave overall energy use unchanged. Rather than concluding the effect is ambiguous, this paper is the first to test for heterogeneous regional effects based on differences in (natural) sun times and (societal) waking hours. Using a rich hourly data set and quasi-experimental methods applied across Canadian provinces, this paper rationalizes the differing results, finding region-specific effects consistent with differences in sun times and waking hours. DST increases electricity use in regions with late sunrises and early waking hours.","tags":["electricity demand","daylight saving time"],"title":"Location matters: Daylight saving time and electricity demand","type":"publication"},{"authors":["Blake Shaffer"],"categories":null,"content":"","date":1567296000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1567296000,"objectID":"c1fc0036445c7dee57a916c02e96e75a","permalink":"/publication/spp_electricityroundtable_summarypaper_2019/","publishdate":"2019-09-01T00:00:00Z","relpermalink":"/publication/spp_electricityroundtable_summarypaper_2019/","section":"publication","summary":"The Role of Storage in Alberta‚Äôs Electricity Market: Summary of a School of Public Policy Roundtable Event.","tags":["energy storage","Alberta electricity market"],"title":"The Role of Storage in Alberta‚Äôs Electricity Market: Summary of a School of Public Policy Roundtable Event","type":"publication"},{"authors":["Blake Shaffer"],"categories":null,"content":" Click the Slides button above to demo Academic\u0026rsquo;s Markdown slides feature.   Supplementary notes can be added here, including code and math.\n","date":1554595200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1554595200,"objectID":"3d1176f445959e67a2a92ad49a1bec5f","permalink":"/old-not-used/publication/preprint/","publishdate":"2017-01-01T00:00:00Z","relpermalink":"/old-not-used/publication/preprint/","section":"OLD-NOT-USED","summary":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum.","tags":["Source Themes"],"title":"An example preprint / working paper","type":"OLD-NOT-USED"},{"authors":[],"categories":[],"content":"Create slides in Markdown with Academic  Academic | Documentation\n Features  Efficiently write slides in Markdown 3-in-1: Create, Present, and Publish your slides Supports speaker notes Mobile friendly slides   Controls  Next: Right Arrow or Space Previous: Left Arrow Start: Home Finish: End Overview: Esc Speaker notes: S Fullscreen: F Zoom: Alt + Click  PDF Export: E   Code Highlighting Inline code: variable\nCode block:\nporridge = \u0026quot;blueberry\u0026quot; if porridge == \u0026quot;blueberry\u0026quot;: print(\u0026quot;Eating...\u0026quot;)   Math In-line math: $x + y = z$\nBlock math:\n$$ f\\left( x \\right) = ;\\frac{{2\\left( {x + 4} \\right)\\left( {x - 4} \\right)}}{{\\left( {x + 4} \\right)\\left( {x + 1} \\right)}} $$\n Fragments Make content appear incrementally\n{{% fragment %}} One {{% /fragment %}} {{% fragment %}} **Two** {{% /fragment %}} {{% fragment %}} Three {{% /fragment %}}  Press Space to play!\nOne  Two  Three \n A fragment can accept two optional parameters:\n class: use a custom style (requires definition in custom CSS) weight: sets the order in which a fragment appears   Speaker Notes Add speaker notes to your presentation\n{{% speaker_note %}} - Only the speaker can read these notes - Press `S` key to view {{% /speaker_note %}}  Press the S key to view the speaker notes!\n Only the speaker can read these notes Press S key to view    Themes  black: Black background, white text, blue links (default) white: White background, black text, blue links league: Gray background, white text, blue links beige: Beige background, dark text, brown links sky: Blue background, thin dark text, blue links    night: Black background, thick white text, orange links serif: Cappuccino background, gray text, brown links simple: White background, black text, blue links solarized: Cream-colored background, dark green text, blue links   Custom Slide Customize the slide style and background\n{{\u0026lt; slide background-image=\u0026quot;/img/boards.jpg\u0026quot; \u0026gt;}} {{\u0026lt; slide background-color=\u0026quot;#0000FF\u0026quot; \u0026gt;}} {{\u0026lt; slide class=\u0026quot;my-style\u0026quot; \u0026gt;}}   Custom CSS Example Let\u0026rsquo;s make headers navy colored.\nCreate assets/css/reveal_custom.css with:\n.reveal section h1, .reveal section h2, .reveal section h3 { color: navy; }   Questions?  Ask\n Documentation\n","date":1549324800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1549324800,"objectID":"0e6de1a61aa83269ff13324f3167c1a9","permalink":"/slides/example/","publishdate":"2019-02-05T00:00:00Z","relpermalink":"/slides/example/","section":"slides","summary":"An introduction to using Academic's Slides feature.","tags":[],"title":"Slides","type":"slides"},{"authors":null,"categories":["population","social"],"content":" Recently released data from Statistics Canada allows us to explore demographic trends in the age make-up of the Canadian population. The trend is clear: Canada is getting old.\nIn this chart-blog, we will take a look at population by age group ‚Äì both across regions and over time ‚Äì and how median age has evolved. (Spoiler: It‚Äôs risen. A lot!)\nYou can find the chart-blog here\n","date":1548633600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1548633600,"objectID":"71bcf5c40c86c1a1f1b6fcd7ff0013af","permalink":"/post/canada-s-aging-population/","publishdate":"2019-01-28T00:00:00Z","relpermalink":"/post/canada-s-aging-population/","section":"post","summary":"Recently released data from Statistics Canada allows us to explore demographic trends in the age make-up of the Canadian population. The trend is clear: Canada is getting old.\nIn this chart-blog, we will take a look at population by age group ‚Äì both across regions and over time ‚Äì and how median age has evolved.","tags":["population"],"title":"Canada‚Äôs aging population","type":"post"},{"authors":null,"categories":[],"content":" Quick post to show how easy it is to do quick data exploration using R. This post walks us through making a (nice!) chart of new vehicle sales in Canada, breaking it down by vehicle type and region.\nStep 1: Load the three packages we will use for this plot:  tidyverse : because always tidyverse cansim : great package to easily extract Statistics Canada data ggthemes : not necessary, but a quick way to pretty up your ggplot  library(tidyverse) library(cansim) library(ggthemes)  Step 2: Data wranglin‚Äô Pull in the data Filter to what we want in the data Fiddle with some labels  data \u0026lt;- get_cansim(20100001) %\u0026gt;% normalize_cansim_values() plotdata \u0026lt;- data %\u0026gt;% filter(GEO!=\u0026quot;Canada\u0026quot;, Sales==\u0026quot;Units\u0026quot;, `Vehicle type` %in% c(\u0026quot;Passenger cars\u0026quot;,\u0026quot;Trucks\u0026quot;), `Origin of manufacture`==\u0026quot;Total, country of manufacture\u0026quot;) # Change some GEO labels to shorten them plotdata$GEO[plotdata$GEO==\u0026quot;Newfoundland and Labrador\u0026quot;] \u0026lt;- \u0026quot;Nfld \u0026amp; Lab.\u0026quot; plotdata$GEO[plotdata$GEO==\u0026quot;British Columbia and the Territories\u0026quot;] \u0026lt;- \u0026quot;BC \u0026amp; Terr.\u0026quot; plotdata$GEO[plotdata$GEO==\u0026quot;Prince Edward Island\u0026quot;] \u0026lt;- \u0026quot;PEI\u0026quot; plotdata$GEO \u0026lt;- factor(plotdata$GEO, levels=c(\u0026quot;BC \u0026amp; Terr.\u0026quot;,\u0026quot;Alberta\u0026quot;,\u0026quot;Saskatchewan\u0026quot;,\u0026quot;Manitoba\u0026quot;,\u0026quot;Ontario\u0026quot;,\u0026quot;Quebec\u0026quot;,\u0026quot;New Brunswick\u0026quot;,\u0026quot;PEI\u0026quot;,\u0026quot;Nova Scotia\u0026quot;,\u0026quot;Nfld \u0026amp; Lab.\u0026quot;)) # Change \u0026quot;passenger cars\u0026quot; to \u0026quot;cars\u0026quot; for plot label plotdata$`Vehicle type`[plotdata$`Vehicle type`==\u0026quot;Passenger cars\u0026quot;] \u0026lt;- \u0026quot;Cars\u0026quot;  Step 3: Plot it! ggplot(plotdata, aes(Date,VALUE,color=`Vehicle type`))+ geom_point(size=.1,alpha=.2)+ geom_smooth(se=F)+ facet_wrap(~GEO, scales=\u0026quot;free_y\u0026quot;, nrow=2)+ scale_color_ptol(name=\u0026quot;\u0026quot;)+ # nice color scheme from ggthemes package scale_x_date(limits=c(as.Date(\u0026quot;1980-01-01\u0026quot;),as.Date(\u0026quot;2020-01-01\u0026quot;)), breaks = c(as.Date(\u0026quot;1980-01-01\u0026quot;),as.Date(\u0026quot;2000-01-01\u0026quot;),as.Date(\u0026quot;2020-01-01\u0026quot;)), date_labels = \u0026quot;%Y\u0026quot;)+ theme_tufte(12,\u0026quot;Shree Devanagari 714\u0026quot;)+ # font similar to \u0026#39;Avenir\u0026#39; theme(legend.position = \u0026quot;top\u0026quot;, title=element_text(face=\u0026quot;bold\u0026quot;), plot.caption = element_text(face=\u0026quot;italic\u0026quot;), legend.text = element_text(size=14))+ labs(x=\u0026quot;\u0026quot;, y=\u0026quot;\u0026quot;, subtitle=\u0026quot;New vehicle sales (monthly)\u0026quot;, title=\u0026quot;Trucks! Trucks! Trucks!\u0026quot;, caption=\u0026quot;Fitted line through monthly (seasonally unadjusted) data.\\nSource: Statscan NDM Table 20-10-0001.\u0026quot;) There you go. A nice quick plot showing a pretty stark shift in consumer preferences towards trucks across all regions in Canada. An interesting extension of this data exploration would be to see what this means in terms of fleet-wide fuel economy. Are people switching from Civics to F-150s? Or Crown Vics to Subaru Crosstreks? The latter would mean a shift from cars to ‚Äútrucks‚Äù is improving overall gas mileage‚Ä¶ More data needed!\nHappy Charting!\n-Blake\n ","date":1545004800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1545004800,"objectID":"885a6ce10b148924ddf61ef6c8b875d1","permalink":"/post/trucks-trucks-trucks/","publishdate":"2018-12-17T00:00:00Z","relpermalink":"/post/trucks-trucks-trucks/","section":"post","summary":"Quick post to show how easy it is to do quick data exploration using R. This post walks us through making a (nice!) chart of new vehicle sales in Canada, breaking it down by vehicle type and region.","tags":[],"title":"Trucks! Trucks! Trucks!","type":"post"},{"authors":null,"categories":[],"content":" What‚Äôs better than making charts? Making them animated, of course! While animation isn‚Äôt always (ok, rarely) necessary, it can help tell a story static charts can‚Äôt.\nRecently there has been a lot of discussion in Canada related to equalization. This is a federal program to transfer funds to provinces with below average fiscal capacity. What is ‚Äúfiscal capacity‚Äù? Others can tell you a lot more about it, but for simplicity, we can think of it like GDP.\nSo I wanted to take a look at GDP per capita, by province, going back several years. A little learning, a lot of online digging, and I was able to create this nice chart:\nI made a chart. #cdnecon #cdnpoli pic.twitter.com/Ks8o5E4qir ‚Äî Blake Shaffer üìä (@bcshaffer) December 13, 2018   People seemed to like it and some wanted to know more about how it was made. This post explains how to make an animated chart like the tweeted one above using gganimate.\n##Let‚Äôs go!\nTo begin, let‚Äôs load our usual packages, but add in the latest version of gganimate from David Robinson which has been updated by Thomas Lin Pedersen. Thomas has added some new syntax which allows for really nice transitions to the animation.\nlibrary(tidyverse) library(lubridate) library(ggthemes) library(ggrepel) # Package to pull in cansim data, courtesy of Jens von Bergman and Dmitry Shkolnik library(cansim) # Now update to the newest gganimate version #install.packages(\u0026quot;devtools\u0026quot;) #devtools::install_github(\u0026#39;thomasp85/gganimate\u0026#39;) library(gganimate) With packages loaded, it‚Äôs time to wrangle the data. I could probably do this cleaner, but meh - it works! I wrote a function below to change the full province names to their 2 character abbreviations that we will use in the plots.\n##Let‚Äôs start by pulling in annual GDP data by province and to test it‚Äôs working do a quick plot.\nprovlist \u0026lt;- c(\u0026quot;British Columbia\u0026quot;,\u0026quot;Alberta\u0026quot;,\u0026quot;Saskatchewan\u0026quot;,\u0026quot;Manitoba\u0026quot;,\u0026quot;Ontario\u0026quot;,\u0026quot;Quebec\u0026quot;,\u0026quot;New Brunswick\u0026quot;,\u0026quot;Nova Scotia\u0026quot;,\u0026quot;Prince Edward Island\u0026quot;,\u0026quot;Newfoundland and Labrador\u0026quot;) short_provs \u0026lt;- function(df){ df \u0026lt;- df %\u0026gt;% filter(GEO %in% c(\u0026quot;British Columbia\u0026quot;,\u0026quot;Alberta\u0026quot;,\u0026quot;Saskatchewan\u0026quot;,\u0026quot;Manitoba\u0026quot;,\u0026quot;Ontario\u0026quot;,\u0026quot;Quebec\u0026quot;,\u0026quot;New Brunswick\u0026quot;,\u0026quot;Nova Scotia\u0026quot;,\u0026quot;Prince Edward Island\u0026quot;,\u0026quot;Newfoundland and Labrador\u0026quot;)) df \u0026lt;- df %\u0026gt;% mutate(GEO.short = case_when( GEO==\u0026quot;British Columbia\u0026quot; ~ \u0026quot;BC\u0026quot;, GEO==\u0026quot;Alberta\u0026quot; ~ \u0026quot;AB\u0026quot;, GEO==\u0026quot;Saskatchewan\u0026quot; ~ \u0026quot;SK\u0026quot;, GEO==\u0026quot;Manitoba\u0026quot; ~ \u0026quot;MB\u0026quot;, GEO==\u0026quot;Ontario\u0026quot; ~ \u0026quot;ON\u0026quot;, GEO==\u0026quot;Quebec\u0026quot; ~ \u0026quot;QC\u0026quot;, GEO==\u0026quot;New Brunswick\u0026quot; ~ \u0026quot;NB\u0026quot;, GEO==\u0026quot;Prince Edward Island\u0026quot; ~ \u0026quot;PE\u0026quot;, GEO==\u0026quot;Nova Scotia\u0026quot; ~ \u0026quot;NS\u0026quot;, GEO==\u0026quot;Newfoundland and Labrador\u0026quot; ~ \u0026quot;NL\u0026quot; )) df$GEO.short \u0026lt;- factor(df$GEO.short, levels=c(\u0026quot;BC\u0026quot;,\u0026quot;AB\u0026quot;,\u0026quot;SK\u0026quot;,\u0026quot;MB\u0026quot;,\u0026quot;ON\u0026quot;,\u0026quot;QC\u0026quot;,\u0026quot;NB\u0026quot;,\u0026quot;PE\u0026quot;,\u0026quot;NS\u0026quot;,\u0026quot;NL\u0026quot;)) } GDP \u0026lt;- get_cansim(36100222) %\u0026gt;% normalize_cansim_values() df.GDP \u0026lt;- GDP %\u0026gt;% mutate(year=as.integer(REF_DATE)) %\u0026gt;% filter(GEO %in% provlist, Prices==\u0026quot;Chained (2012) dollars\u0026quot;, Estimates==\u0026quot;Gross domestic product at market prices\u0026quot;) %\u0026gt;% dplyr::select(GEO,year,GDP=VALUE) df.GDP$GEO.short\u0026lt;-short_provs(df.GDP) ggplot(df.GDP, aes(GEO.short, GDP/1e9, fill = GEO.short, label=GEO.short)) + geom_col()+ geom_text(vjust=-.1)+ scale_fill_viridis_d(name=\u0026quot;\u0026quot;)+ scale_y_continuous(labels=scales::dollar)+ theme_tufte(14,\u0026quot;Avenir\u0026quot;)+ theme(legend.position = \u0026quot;none\u0026quot;, axis.text.x = element_blank(), axis.ticks = element_blank())+ # Here comes the gganimate specific bits labs(title = \u0026quot;Year: {frame_time}\u0026quot;, x = \u0026quot;\u0026quot;, y = \u0026quot;GDP (2012$ billions\u0026quot;) + transition_time(year) + ease_aes(\u0026#39;linear\u0026#39;)  Ok. Good! We have an animated chart! But it‚Äôs not too informative given the BIG and small size of provinces. So to look at per capita GDP we need to pull in annual population data and merge it with our GDP data.\npop \u0026lt;- get_cansim(17100005) %\u0026gt;% normalize_cansim_values() df.pop \u0026lt;- pop %\u0026gt;% mutate(year=as.integer(REF_DATE)) %\u0026gt;% filter(GEO %in% provlist, Sex==\u0026quot;Both sexes\u0026quot;, `Age group`==\u0026quot;All ages\u0026quot;) %\u0026gt;% dplyr::select(GEO,year,pop=VALUE) df.GDPpercap \u0026lt;-left_join(df.GDP,df.pop, by=c(\u0026quot;year\u0026quot;,\u0026quot;GEO\u0026quot;)) %\u0026gt;% mutate(GDPpercap=GDP/pop) df.GDPpercap$GEO.short\u0026lt;-short_provs(df.GDPpercap) ##Now, let‚Äôs create our plot.\nI‚Äôm going to use the animate function here so that I can change the speed of the animation a bit, and add a pause at the end.\np\u0026lt;-ggplot(df.GDPpercap, aes(GEO.short, GDPpercap, fill=GEO.short, label=GEO.short)) + geom_col()+ geom_text(vjust=-.1)+ scale_fill_viridis_d(name=\u0026quot;\u0026quot;)+ theme_tufte(14,\u0026quot;Avenir\u0026quot;)+ theme(legend.position = \u0026quot;none\u0026quot;, axis.text.x = element_blank(), axis.ticks = element_blank())+ # Here comes the gganimate specific bits labs(title = \u0026#39;Year: {frame_time}\u0026#39;, x = \u0026#39;\u0026#39;, y = \u0026#39;GDP per capita ($2012)\u0026#39;) + transition_time(year) + ease_aes(\u0026#39;linear\u0026#39;) animate(p, fps=5, end_pause = 30) # Use anim_save(filename) to save the plot Not bad. But we can do better! It would be fun to get the provinces to rank themselves every frame. And let‚Äôs flip it horizontally too to look like they‚Äôre climbing over one another.\nA little digging on stackoverflow took me to this post by Jon Spring: (https://stackoverflow.com/questions/52623722/how-does-gganimate-order-an-ordered-bar-time-series)\nBasically, we add a rank variable, grouping first by year and ordering the provinces. We will use this as our x axis (vertical axis in the flipped coordinates). We will also use geom_tile instead of geom_col because this object creates smoother transitions in the size of the bars.\nThe tweeted chart! plotdata \u0026lt;- df.GDPpercap %\u0026gt;% group_by(year) %\u0026gt;% mutate(ordering = rank(GDPpercap)) %\u0026gt;% ungroup() p\u0026lt;-ggplot(plotdata, aes(ordering, group = GEO.short,color=GEO.short,fill=GEO.short)) + geom_tile(aes(y = GDPpercap/2, height = GDPpercap, width = 0.9), alpha = 0.9) + # text on top of bars geom_text(aes(y = GDPpercap, label = GEO.short), hjust = -0.4) + # text in x-axis (requires clip = \u0026quot;off\u0026quot; in coord_cartesian) geom_text(aes(y = 0, label = GEO.short), hjust = 1.4) + coord_flip(clip = \u0026quot;off\u0026quot;, expand = FALSE) + scale_color_viridis_d(name=\u0026quot;\u0026quot;)+ scale_fill_viridis_d(name=\u0026quot;\u0026quot;)+ scale_y_continuous(labels=scales::dollar)+ theme_tufte(14,\u0026quot;Avenir\u0026quot;)+ guides(color=F,fill=F)+ labs(title=\u0026#39;{frame_time}\u0026#39;, x = \u0026quot;\u0026quot;,y=\u0026quot;GDP per capita ($2012)\u0026quot;) + theme(plot.title = element_text(hjust = 1, size = 22), axis.ticks.y = element_blank(), axis.text.y = element_blank()) + transition_time(year)+ ease_aes(\u0026#39;cubic-in-out\u0026#39;) animate(p, nframes = 100, fps = 5, end_pause = 20) #again, use anim_save(filename) to save Cool. If i do say so myself :-)\nBut wait, we can do more! Rather than bars, let‚Äôs plot points as in a scatter plot and watch them float over time. We can start by looking at the co-movement of GDP per capita and unemployment rates across provinces over time. I pull in the annual LFS data from NDM 14-10-0090, merging the annual unemployment rate values with our GDP per capita data.\n Let‚Äôs chart it! p\u0026lt;-ggplot(df.full, aes(GDPpercap,Unemp_Rate, color=GEO.short, label=GEO.short)) + geom_point(aes(size=pop))+ geom_text(hjust=-.2,vjust=-.2)+ scale_color_viridis_d(name=\u0026quot;\u0026quot;)+ scale_y_continuous(labels=scales::percent)+ scale_x_continuous(labels=scales::dollar)+ theme_tufte(14,\u0026quot;Avenir\u0026quot;)+ theme(legend.position = \u0026quot;none\u0026quot;, plot.caption = element_text(size=9,face=\u0026quot;italic\u0026quot;))+ guides(size=F,color=F)+ # Here comes the gganimate specific bits labs(title = \u0026#39;Year: {frame_time}\u0026#39;, x = \u0026#39;GDP per capita ($2012)\u0026#39;, y = \u0026quot;Unemployment Rate\u0026quot;, caption=\u0026quot;Bubble size proportional to population\\nChart by @bcshaffer\u0026quot;) + transition_time(year) + ease_aes(\u0026#39;linear\u0026#39;) animate(p, nframes = 100, fps = 10, width = 600, height = 400, end_pause = 30) Lastly, we can do the same with the employment rate. This time leads add some bread crumbs behind our roving points to get some history.\np\u0026lt;-ggplot(df.full, aes(GDPpercap,Emp_Rate, color=GEO.short, label=GEO.short)) + geom_point(aes(size=pop))+ geom_text(hjust=-.2,vjust=-.2)+ scale_color_viridis_d(name=\u0026quot;\u0026quot;)+ scale_y_continuous(labels=scales::percent)+ scale_x_continuous(labels=scales::dollar)+ theme_tufte(14,\u0026quot;Avenir\u0026quot;)+ theme(legend.position = \u0026quot;none\u0026quot;, plot.caption = element_text(size=9,face=\u0026quot;italic\u0026quot;))+ guides(size=F,color=F)+ # Here comes the gganimate specific bits labs(title = \u0026#39;Year: {frame_time}\u0026#39;, x = \u0026#39;GDP per capita ($2012)\u0026#39;, y = \u0026quot;Employment Rate\u0026quot;, caption=\u0026quot;Bubble size proportional to population\\nChart by @bcshaffer\u0026quot;) + transition_time(year) + shadow_wake(wake_length = 1, exclude_layer = 2)+ ease_aes(\u0026#39;cubic-in-out\u0026#39;) #ease_aes(\u0026#39;linear\u0026#39;) animate(p, nframes = 100, fps = 10, width = 600, height = 400, end_pause = 30) Happy charting!\n-Blake\n ","date":1544745600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1544745600,"objectID":"92b85625af81abce2656b91a6730bc44","permalink":"/post/making-animated-charts-with-gganimate/","publishdate":"2018-12-14T00:00:00Z","relpermalink":"/post/making-animated-charts-with-gganimate/","section":"post","summary":"What‚Äôs better than making charts? Making them animated, of course! While animation isn‚Äôt always (ok, rarely) necessary, it can help tell a story static charts can‚Äôt.\nRecently there has been a lot of discussion in Canada related to equalization.","tags":[],"title":"Making animated charts with gganimate","type":"post"},{"authors":null,"categories":["social"],"content":" Statistics Canada recently released new data on victims of violent crime across Canada from 2009 to 2017. In this post, I explore trends in this data by region, age and gender.\nI find, unsurprisingly, big differences in incidence by gender. The rate of violent crime, notably sexual assaults, remains extremely skewed towards women. The rate of violent crime causing death and attempted murder is skewed towards men but remains relatively low in Canada. Alarmingly, the rate of sexual assaults towards young girls is high and climbing. Regional splits also show concerning trends in certain regions.\nLet‚Äôs start by pulling in the data which can be found in NDM table 35-10-0051.\nlibrary(tidyverse) library(cansim) library(ggthemes) data \u0026lt;- get_cansim(35100051) %\u0026gt;% normalize_cansim_values() %\u0026gt;% mutate(year = as.numeric(REF_DATE)) data$GEO \u0026lt;- factor(data$GEO, levels=c(\u0026quot;Canada\u0026quot;, \u0026quot;British Columbia\u0026quot;, \u0026quot;Alberta\u0026quot;, \u0026quot;Saskatchewan\u0026quot;, \u0026quot;Manitoba\u0026quot;, \u0026quot;Ontario\u0026quot;, \u0026quot;Quebec\u0026quot;, \u0026quot;New Brunswick\u0026quot;, \u0026quot;Prince Edward Island\u0026quot;, \u0026quot;Nova Scotia\u0026quot;, \u0026quot;Newfoundland and Labrador\u0026quot;, \u0026quot;Yukon\u0026quot;, \u0026quot;Northwest Territories\u0026quot;, \u0026quot;Nunavut\u0026quot;)) To start, let‚Äôs look at Canada-wide total violations, by gender:\nplotdata \u0026lt;- data %\u0026gt;% filter( `Sex of victim`!=\u0026quot;Total, sex of victim\u0026quot;, `Sex of victim`!=\u0026quot;Sex of victim unknown\u0026quot;, `Age of victim`==\u0026quot;Total, age of victim\u0026quot;, Statistics==\u0026quot;Rate per 100,000 population\u0026quot;, GEO==\u0026quot;Canada\u0026quot;, Violations==\u0026quot;Total, all violations\u0026quot;) ggplot(plotdata, aes(Date,VALUE, group=`Sex of victim`, color=`Sex of victim`))+ geom_line(size=1.5)+ theme_light(12,\u0026quot;Avenir\u0026quot;)+ scale_color_manual(name=\u0026quot;\u0026quot;,values=c(\u0026quot;#CC6677\u0026quot;,\u0026quot;#4477AA\u0026quot;))+ theme(legend.position = \u0026quot;top\u0026quot;)+ labs(x=\u0026quot;\u0026quot;,y=\u0026quot;Rate per 100,000 population\u0026quot;, title=\u0026quot;Victims of police-reported violent crime\u0026quot;, subtitle=\u0026quot;Total, all ages\u0026quot;, caption=\u0026quot;Source: Statistics Canada NDM 35-10-0051\\nChart by @bcshaffer\u0026quot;) We can dig a little deeper and see how this breaks down by age group:\n# by age plotdata \u0026lt;- data %\u0026gt;% filter( `Sex of victim`!=\u0026quot;Total, sex of victim\u0026quot;, `Sex of victim`!=\u0026quot;Sex of victim unknown\u0026quot;, `Age of victim` %in% c(\u0026quot;Under 12 years\u0026quot;, \u0026quot;12 to 17 years\u0026quot;, \u0026quot;18 years and over\u0026quot;), Statistics==\u0026quot;Rate per 100,000 population\u0026quot;, GEO==\u0026quot;Canada\u0026quot;, Violations==\u0026quot;Total, all violations\u0026quot;) plotdata$`Age of victim` \u0026lt;- factor(plotdata$`Age of victim`, levels=c(\u0026quot;Under 12 years\u0026quot;, \u0026quot;12 to 17 years\u0026quot;, \u0026quot;18 years and over\u0026quot;)) ggplot(plotdata, aes(Date,VALUE, group=`Sex of victim`, color=`Sex of victim`))+ geom_line(size=1.5)+ theme_light(12,\u0026quot;Avenir\u0026quot;)+ facet_wrap(~ `Age of victim`,nrow=1)+ scale_color_manual(name=\u0026quot;\u0026quot;,values=c(\u0026quot;#CC6677\u0026quot;,\u0026quot;#4477AA\u0026quot;))+ theme(legend.position = \u0026quot;top\u0026quot;)+ labs(x=\u0026quot;\u0026quot;,y=\u0026quot;Rate per 100,000 population\u0026quot;, title=\u0026quot;Victims of police-reported violent crime\u0026quot;, subtitle=\u0026quot;Total, all ages\u0026quot;, caption=\u0026quot;Source: Statistics Canada NDM 35-10-0051\\nChart by @bcshaffer\u0026quot;) There is concerning growth in the rate of violent crimes against teens. For some perspective, let‚Äôs see the same data in numbers of victim rather than rate. The bulk of crimes remains in the greater than 18 category, although growth is larger for teens, especially on a per capita basis. Now, let‚Äôs look at the rate of crime per 100,000 population by each violation type across each province. The list of violation types is:\nunique(data$Violations) ## [1] \u0026quot;Total, all violations\u0026quot; ## [2] \u0026quot;Violations causing death and attempted murder\u0026quot; ## [3] \u0026quot;Sexual assaults, levels 1, 2, 3\u0026quot; ## [4] \u0026quot;Sexual violations against children\u0026quot; ## [5] \u0026quot;Assaults\u0026quot; ## [6] \u0026quot;Other violent violations\u0026quot; ## [7] \u0026quot;Criminal Code traffic violations causing death or bodily harm\u0026quot; Breakdown by Province We start by only looking at the provinces, because the territory values blow up the y-axis. I‚Äôll come back to important data in the territories later. We aggregate across all ages, but split the data by sex.\n# Function to plot by sex (all ages) with violation type as input # Excludes territories due to much higher rate (y-axis issues) plotbysex \u0026lt;- function(v){ plotdata \u0026lt;- data %\u0026gt;% filter( Violations==v, `Sex of victim`!=\u0026quot;Total, sex of victim\u0026quot;, `Sex of victim`!=\u0026quot;Sex of victim unknown\u0026quot;, `Age of victim`==\u0026quot;Total, age of victim\u0026quot;, Statistics==\u0026quot;Rate per 100,000 population\u0026quot;, !(GEO %in% c(\u0026quot;Canada\u0026quot;,\u0026quot;Northwest Territories\u0026quot;,\u0026quot;Nunavut\u0026quot;,\u0026quot;Yukon\u0026quot;)) ) ggplot(plotdata, aes(year,VALUE, group=`Sex of victim`, color=`Sex of victim`))+ geom_line(size=1.5)+ facet_wrap(~ GEO,nrow=2)+ theme_light(12,\u0026quot;Avenir\u0026quot;)+ scale_color_manual(name=\u0026quot;\u0026quot;,values=c(\u0026quot;#CC6677\u0026quot;,\u0026quot;#4477AA\u0026quot;))+ scale_x_continuous(breaks=c(2010,2016))+ theme(legend.position = \u0026quot;top\u0026quot;)+ labs(x=\u0026quot;\u0026quot;,y=\u0026quot;Rate per 100,000 population\u0026quot;, title=\u0026quot;Victims of police-reported violent crime\u0026quot;, subtitle=paste0(v,\u0026quot;, all ages\u0026quot;), caption=\u0026quot;Source: Statistics Canada NDM 35-10-0051\\nChart by @bcshaffer\u0026quot;) } plotbysex(\u0026quot;Total, all violations\u0026quot;) plotbysex(\u0026quot;Violations causing death and attempted murder\u0026quot;) plotbysex(\u0026quot;Sexual assaults, levels 1, 2, 3\u0026quot;) plotbysex(\u0026quot;Sexual violations against children\u0026quot;) plotbysex(\u0026quot;Assaults\u0026quot;) plotbysex(\u0026quot;Other violent violations\u0026quot;) plotbysex(\u0026quot;Criminal Code traffic violations causing death or bodily harm\u0026quot;)  The Territories Now, let‚Äôs look at the same data, but filtering only on the 3 territories and Canada for reference.\nplotbysex.t(\u0026quot;Total, all violations\u0026quot;) plotbysex.t(\u0026quot;Violations causing death and attempted murder\u0026quot;) plotbysex.t(\u0026quot;Sexual assaults, levels 1, 2, 3\u0026quot;) plotbysex.t(\u0026quot;Sexual violations against children\u0026quot;) plotbysex.t(\u0026quot;Assaults\u0026quot;) plotbysex.t(\u0026quot;Other violent violations\u0026quot;) plotbysex.t(\u0026quot;Criminal Code traffic violations causing death or bodily harm\u0026quot;)  Breakdown by Age We can look at how the incidence of violent crime breaks down by age. Here we‚Äôll look at the Canada-wide numbers. A massive table (facet_grid) splitting it by age and region is possible, but gets messy quickly. I hide the function code here, but it is similar to the above function, with the exception that faceting is done by age rather than province, and I filter on Canada-wide data only.\nplotbyage(\u0026quot;Total, all violations\u0026quot;) plotbyage(\u0026quot;Violations causing death and attempted murder\u0026quot;) plotbyage(\u0026quot;Sexual assaults, levels 1, 2, 3\u0026quot;) plotbyage(\u0026quot;Sexual violations against children\u0026quot;) plotbyage(\u0026quot;Assaults\u0026quot;) plotbyage(\u0026quot;Other violent violations\u0026quot;) plotbyage(\u0026quot;Criminal Code traffic violations causing death or bodily harm\u0026quot;)  The Bottom Line:  The rate of violent crime, notably sexual assaults, remains extremely skewed towards women. The rate of violent crime causing death and attempted murder is skewed towards men but remains relatively low. The rate of sexual assaults towards young girls is high and alarmingly climbing.   ","date":1544054400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1544054400,"objectID":"5c0eb106bc6285c022007fbceb981bfd","permalink":"/post/new-statscan-data-on-victims-of-violent-crime/","publishdate":"2018-12-06T00:00:00Z","relpermalink":"/post/new-statscan-data-on-victims-of-violent-crime/","section":"post","summary":"Statistics Canada recently released new data on victims of violent crime across Canada from 2009 to 2017. In this post, I explore trends in this data by region, age and gender.","tags":["crime","gender"],"title":"New Statscan data on victims of violent crime in Canada","type":"post"},{"authors":null,"categories":["energy"],"content":" This post looks at gasoline demand across the Canadian provinces and territories. It was prompted by this tweet by @sjmuir, noting that gasoline demand per capita in BC is unchanged since 2008, the year of implementation of the BC carbon tax.\nIt's taboo to point this out, but the fact is that British Columbia residents used as much gasoline in 2017 as they did in 2008. That's why I'm skeptical whenever it's stated that carbon pricing has led to some kind of revolution in fuel usage, because it hasn't. pic.twitter.com/3IPILHxnTw ‚Äî Stewart Muir (@sjmuir) November 30, 2018   The data didn‚Äôt fit my prior as I had seen in a recent paper that shows BC gasoline demand per capita falling relative to the rest of Canada.\nSo what gives?\nIt turns out, a lot has changed since the above referenced paper. Namely, BC gasoline demand has risen quite a bit since 2015. Let‚Äôs dig in. I‚Äôll first plot the change in total gasoline demand in each province since 2008:\nlibrary(tidyverse) library(lubridate) library(cansim) library(ggrepel) library(ggthemes) ## GET EMPLOYMENT DATA data.gas \u0026lt;- get_cansim(23100066) %\u0026gt;% normalize_cansim_values() %\u0026gt;% filter(`Type of fuel sales`==\u0026quot;Net sales of gasoline\u0026quot;, GEO!=\u0026quot;Northwest Territories including Nunavut\u0026quot;) %\u0026gt;% mutate(Year=as.numeric(REF_DATE), Region = case_when(GEO %in% c(\u0026quot;British Columbia\u0026quot;,\u0026quot;Alberta\u0026quot;,\u0026quot;Saskatchewan\u0026quot;) ~ \u0026quot;West\u0026quot;, GEO %in% c(\u0026quot;Manitoba\u0026quot;,\u0026quot;Ontario\u0026quot;,\u0026quot;Quebec\u0026quot;) ~ \u0026quot;Central\u0026quot;, GEO %in% c(\u0026quot;New Brunswick\u0026quot;,\u0026quot;Nova Scotia\u0026quot;,\u0026quot;Prince Edward Island\u0026quot;,\u0026quot;Newfoundland and Labrador\u0026quot;) ~ \u0026quot;East\u0026quot;, GEO %in% c(\u0026quot;Yukon\u0026quot;,\u0026quot;Northwest Territories\u0026quot;,\u0026quot;Nunavut\u0026quot;) ~ \u0026quot;Territories\u0026quot;, GEO==\u0026quot;Canada\u0026quot; ~ \u0026quot;CANADA\u0026quot;), GEO.abb = case_when(GEO==\u0026quot;British Columbia\u0026quot; ~ \u0026quot;BC\u0026quot;, GEO==\u0026quot;Alberta\u0026quot; ~ \u0026quot;AB\u0026quot;, GEO==\u0026quot;Saskatchewan\u0026quot; ~ \u0026quot;SK\u0026quot;, GEO==\u0026quot;Manitoba\u0026quot; ~ \u0026quot;MB\u0026quot;, GEO==\u0026quot;Ontario\u0026quot; ~ \u0026quot;ON\u0026quot;, GEO==\u0026quot;Quebec\u0026quot; ~ \u0026quot;QC\u0026quot;, GEO==\u0026quot;New Brunswick\u0026quot; ~ \u0026quot;NB\u0026quot;, GEO==\u0026quot;Nova Scotia\u0026quot; ~ \u0026quot;NS\u0026quot;, GEO==\u0026quot;Prince Edward Island\u0026quot; ~ \u0026quot;PE\u0026quot;, GEO==\u0026quot;Newfoundland and Labrador\u0026quot; ~ \u0026quot;NL\u0026quot;, GEO==\u0026quot;Yukon\u0026quot; ~ \u0026quot;YT\u0026quot;, GEO==\u0026quot;Northwest Territories\u0026quot; ~ \u0026quot;NT\u0026quot;, GEO==\u0026quot;Nunavut\u0026quot; ~ \u0026quot;NU\u0026quot;, GEO==\u0026quot;Canada\u0026quot; ~ \u0026quot;CAN\u0026quot;)) %\u0026gt;% group_by(GEO) %\u0026gt;% mutate(Index=VALUE/VALUE[Year==2008]) %\u0026gt;% dplyr::select(Year,Date,GEO,GEO.abb,Region,Index,\u0026quot;Gasoline\u0026quot;=VALUE) data.gas$Region \u0026lt;- factor(data.gas$Region, levels=c(\u0026quot;CANADA\u0026quot;,\u0026quot;West\u0026quot;,\u0026quot;Central\u0026quot;,\u0026quot;East\u0026quot;,\u0026quot;Territories\u0026quot;)) ggplot()+ geom_line(data=data.gas %\u0026gt;% filter(GEO!=\u0026quot;Canada\u0026quot;,GEO!=\u0026quot;Nunavut\u0026quot;,GEO!=\u0026quot;British Columbia\u0026quot;), aes(Year,Index,group=GEO,color=GEO), size=1)+ geom_line(data=data.gas %\u0026gt;% filter(GEO==\u0026quot;British Columbia\u0026quot;), aes(Year,Index), size=2, color=\u0026quot;firebrick\u0026quot;)+ geom_label_repel(data=data.gas %\u0026gt;% filter(Year==2017,GEO!=\u0026quot;Canada\u0026quot;,GEO!=\u0026quot;Nunavut\u0026quot;,GEO!=\u0026quot;British Columbia\u0026quot;), aes(Year, Index, color=GEO, label=GEO.abb), nudge_x=.5)+ geom_label_repel(data=data.gas %\u0026gt;% filter(Year==2017,GEO==\u0026quot;British Columbia\u0026quot;), aes(Year, Index, label=GEO.abb), nudge_x=.5, color=\u0026quot;firebrick\u0026quot;)+ geom_hline(yintercept = 1,linetype=\u0026quot;dashed\u0026quot;)+ scale_y_continuous(labels=scales::percent)+ scale_x_continuous(breaks=seq(2008,2018,2),limits=c(2008,2018))+ coord_cartesian(ylim=c(.95,1.4))+ scale_color_viridis_d(name=\u0026quot;\u0026quot;)+ theme_classic(14,\u0026quot;Gill Sans\u0026quot;)+ theme(plot.caption=element_text(size=8,face=\u0026quot;italic\u0026quot;), legend.position = \u0026quot;none\u0026quot;)+ labs(x=\u0026quot;\u0026quot;,y=\u0026quot;\u0026quot;, subtitle=\u0026quot;Gasoline demand relative to 2008 (unadjusted for population)\u0026quot;, caption=\u0026quot;Statistics Canada NDM Table 23-10-0066\\nChart by @bcshaffer\u0026quot;) It‚Äôs a busy chart but there‚Äôs a few things to note:\nSask is guzzling the stuff. This isn‚Äôt per capita yet, but still! Meanwhile, BC, which showed a big dip in 2011-2014 has come roaring back.  The above chart isn‚Äôt per capita. So let‚Äôs get quarterly population estimates, annualize them, and create a gasoline_per_capita variable:\n## GET POPULATION DATA data.population \u0026lt;- get_cansim(0510005) %\u0026gt;% normalize_cansim_values() %\u0026gt;% mutate(Year=year(Date)) %\u0026gt;% dplyr::select(Year,GEO,\u0026quot;Population\u0026quot;=VALUE) %\u0026gt;% group_by(GEO,Year) %\u0026gt;% summarise(Population=mean(Population)) ## Merge and plot plotdata \u0026lt;- left_join(data.gas,data.population,by=c(\u0026quot;Year\u0026quot;,\u0026quot;GEO\u0026quot;)) plotdata$gas_per_cap \u0026lt;- plotdata$Gasoline/plotdata$Population/365 ggplot(plotdata, aes(Year,gas_per_cap,group=GEO,color=GEO,label=GEO.abb))+ geom_line(size=1.5)+ geom_vline(xintercept = 2008,linetype=\u0026quot;dashed\u0026quot;)+ geom_label_repel(data=plotdata %\u0026gt;% filter(Year==2017),nudge_x=.5)+ facet_wrap(~Region,nrow=1)+ scale_x_continuous(breaks=seq(2008,2018,4),limits=c(2008,2019))+ scale_color_viridis_d(name=\u0026quot;\u0026quot;,option=\u0026quot;B\u0026quot;)+ theme_classic(14,\u0026quot;Gill Sans\u0026quot;)+ theme(plot.caption=element_text(size=8,face=\u0026quot;italic\u0026quot;), legend.position = \u0026quot;none\u0026quot;)+ labs(x=\u0026quot;\u0026quot;,y=\u0026quot;Litres per day\u0026quot;, subtitle=\u0026quot;Per capita gasoline demand\u0026quot;, caption=\u0026quot;Statistics Canada NDM Table 23-10-0066 and 17-10-0009\\nChart by @bcshaffer\u0026quot;) Another question, is how different economic growth‚Äìrather than just population growth‚Äìacross provinces impacts their gasoline demand. So here we look at gasoline intensity, the ratio of annual gasoline demand (in litres) per thousand dollars of GDP. (Note: I drop the territories as their scale gets wonky. Sorry Territories‚Ä¶)\n## GET GDP DATA data.GDP \u0026lt;- get_cansim(36100222) %\u0026gt;% normalize_cansim_values() %\u0026gt;% filter(Prices==\u0026quot;Chained (2012) dollars\u0026quot;, Estimates==\u0026quot;Gross domestic product at market prices\u0026quot;) %\u0026gt;% mutate(Year=year(Date)) %\u0026gt;% dplyr::select(Year,GEO,\u0026quot;GDP\u0026quot;=VALUE) plotdata \u0026lt;- left_join(plotdata,data.GDP, by=c(\u0026quot;Year\u0026quot;,\u0026quot;GEO\u0026quot;)) plotdata$gas_intensity \u0026lt;- plotdata$Gasoline / plotdata$GDP * 1000 plotdata \u0026lt;- plotdata %\u0026gt;% filter(Region!=\u0026quot;Territories\u0026quot;) ggplot(plotdata, aes(Year,gas_intensity,group=GEO,color=GEO,label=GEO.abb))+ geom_line(size=1.5)+ geom_vline(xintercept = 2008,linetype=\u0026quot;dashed\u0026quot;)+ geom_label_repel(data=plotdata %\u0026gt;% filter(Year==2017),nudge_x=1)+ facet_wrap(~Region,nrow=1)+ scale_x_continuous(breaks=seq(1995,2015,10),limits=c(1994,2020))+ coord_cartesian(ylim=c(16,45))+ scale_color_viridis_d(name=\u0026quot;\u0026quot;,option=\u0026quot;B\u0026quot;)+ theme_classic(14,\u0026quot;Gill Sans\u0026quot;)+ theme(plot.caption=element_text(size=8,face=\u0026quot;italic\u0026quot;), legend.position = \u0026quot;none\u0026quot;)+ labs(x=\u0026quot;\u0026quot;,y=\u0026quot;L per $1000 GDP\u0026quot;, subtitle=\u0026quot;Gasoline intensity\\n(Gas demand / GDP)\u0026quot;, caption=\u0026quot;Statistics Canada NDM Table 23-10-0066 and 36-10-0222\\nChart by @bcshaffer\u0026quot;) It‚Äôs a little hard to tell in that graph, but in the West plot, BC is the line that starts highest and is falling rapidly throughout the period. I‚Äôll re-plot it on one panel here:\nggplot()+ geom_line(data=plotdata %\u0026gt;% filter(GEO!=\u0026quot;Nunavut\u0026quot;,GEO!=\u0026quot;British Columbia\u0026quot;), aes(Year,gas_intensity,group=GEO,color=GEO), size=1)+ geom_line(data=plotdata %\u0026gt;% filter(GEO==\u0026quot;British Columbia\u0026quot;), aes(Year,gas_intensity), size=2, color=\u0026quot;firebrick\u0026quot;)+ geom_label_repel(data=plotdata %\u0026gt;% filter(Year==2017,GEO!=\u0026quot;Nunavut\u0026quot;,GEO!=\u0026quot;British Columbia\u0026quot;), aes(Year, gas_intensity, color=GEO, label=GEO.abb), nudge_x=1)+ geom_label_repel(data=plotdata %\u0026gt;% filter(Year==2017,GEO==\u0026quot;British Columbia\u0026quot;), aes(Year, gas_intensity, label=GEO.abb), nudge_x=.5, color=\u0026quot;firebrick\u0026quot;)+ geom_vline(xintercept = 2008,linetype=\u0026quot;dashed\u0026quot;)+ scale_x_continuous(breaks=seq(1995,2015,10),limits=c(1994,2020))+ coord_cartesian(ylim=c(16,48))+ scale_color_viridis_d(name=\u0026quot;\u0026quot;)+ theme_classic(14,\u0026quot;Gill Sans\u0026quot;)+ theme(plot.caption=element_text(size=8,face=\u0026quot;italic\u0026quot;), legend.position = \u0026quot;none\u0026quot;)+ labs(x=\u0026quot;\u0026quot;,y=\u0026quot;L per $1000 GDP\u0026quot;, subtitle=\u0026quot;Gasoline intensity\\n(Gas demand / GDP)\u0026quot;, caption=\u0026quot;Statistics Canada NDM Table 23-10-0066 and 36-10-0222\\nChart by @bcshaffer\u0026quot;) To summarise, and make it clearer, let‚Äôs take a look at just BC and Canada side by side for both gasoline intensity and gasoline per capita:\ndata.summary \u0026lt;- plotdata %\u0026gt;% filter(GEO %in% c(\u0026quot;British Columbia\u0026quot;,\u0026quot;Canada\u0026quot;)) %\u0026gt;% dplyr::select(Year,GEO,GEO.abb,gas_per_cap,gas_intensity) %\u0026gt;% gather(key,value,gas_per_cap,gas_intensity) ggplot(data.summary, aes(Year,value,group=GEO,color=GEO))+ geom_line(size=1.5)+ geom_vline(xintercept = 2008,linetype=\u0026quot;dashed\u0026quot;)+ facet_wrap(~key,scales=\u0026quot;free_y\u0026quot;)+ scale_x_continuous(breaks=seq(1995,2015,5))+ scale_color_manual(name=\u0026quot;\u0026quot;,values=c(\u0026quot;forestgreen\u0026quot;,\u0026quot;red\u0026quot;))+ theme_classic(12,\u0026quot;Gill Sans\u0026quot;)+ theme(plot.caption=element_text(size=8,face=\u0026quot;italic\u0026quot;), legend.position = \u0026quot;top\u0026quot;, legend.text = element_text(size=14), strip.text = element_text(size=12))+ labs(x=\u0026quot;\u0026quot;,y=\u0026quot;\u0026quot;, subtitle=\u0026quot;gas_intensity: L/GDP ($\u0026#39;000s)\\ngas_per_cap: L/capita/day\u0026quot;, title=\u0026quot;BC vs the Rest of Canada\u0026quot;, caption=\u0026quot;Statistics Canada NDM Table 23-10-0066, 36-10-0222, 17-10-0009\\nChart by @bcshaffer\u0026quot;) Bottom line: gasoline intensity (the amount of gasoline demand per $1000 of GDP) is falling across the board. That‚Äôs a good thing. B.C.‚Äôs gasoline intensity is falling more rapidly than the Canadian average. On a per capita basis, despite rising in the past 2 years on the back of strong GDP growth, BC is still falling relative to the Canadian average.\n","date":1543536000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1543536000,"objectID":"0a7ab0c2a71869cce4adf70703d6c886","permalink":"/post/gasoline-demand-bc-and-the-rest-of-canada/","publishdate":"2018-11-30T00:00:00Z","relpermalink":"/post/gasoline-demand-bc-and-the-rest-of-canada/","section":"post","summary":"This post looks at gasoline demand across the Canadian provinces and territories. It was prompted by this tweet by @sjmuir, noting that gasoline demand per capita in BC is unchanged since 2008, the year of implementation of the BC carbon tax.","tags":[],"title":"Gasoline demand: BC and the Rest of Canada","type":"post"},{"authors":null,"categories":["social"],"content":" In this post, I consider the relationship between Social Assistance Caseloads and Unemployment Duration in Alberta.\nLet‚Äôs start by calling the necessary libraries\nlibrary(tidyverse) library(zoo) library(cansim) #Big thanks to Jens von Bergmann and Dmitry Shkolnik for this package! First, get CASELOAD data from open.alberta.ca data.caseload \u0026lt;-read.csv(\u0026quot;https://open.alberta.ca/dataset/e1ec585f-3f52-40f2-a022-5a38ea3397e5/resource/4f97a3ae-1b3a-48e9-a96f-f65c58526e07/download/GOAIncomeSupportCSVv61.02017-05-15.csv\u0026quot;) data.caseload \u0026lt;- data.caseload %\u0026gt;% mutate(Date = as.Date(as.yearmon(Ref_Date,\u0026quot;%b-%y\u0026quot;))) %\u0026gt;% filter(Geography==\u0026quot;Alberta\u0026quot;) %\u0026gt;% dplyr::select(\u0026quot;Caseloads\u0026quot;=Value,Date,Measure) data.caseload.total \u0026lt;- data.caseload %\u0026gt;% filter(Measure==\u0026quot;Total Caseload\u0026quot;) %\u0026gt;% dplyr::select(Caseloads,Date) ggplot(data.caseload.total, aes(Date,Caseloads))+geom_line() #check data  Second, get DURATION data from Statistics Canada data.duration \u0026lt;- get_cansim(2820047) %\u0026gt;% normalize_cansim_values() data.duration \u0026lt;- data.duration %\u0026gt;% filter(GEO==\u0026quot;Alberta\u0026quot;, `Duration of unemployment`==\u0026quot;Average weeks unemployed, no top-code\u0026quot;, Sex==\u0026quot;Both sexes\u0026quot;, `Age group`==\u0026quot;15 years and over\u0026quot;, Date\u0026gt;=\u0026quot;2005-04-01\u0026quot;) %\u0026gt;% dplyr::select(\u0026quot;Duration\u0026quot;=VALUE,Date) ggplot(data.duration, aes(Date,Duration))+geom_line() #check data  Now, gather into long format and do a quick plot plotdata \u0026lt;- merge(data.duration, data.caseload.total, by=\u0026quot;Date\u0026quot;) plotdata \u0026lt;- gather(plotdata,key,value,2:3) ggplot(plotdata, aes(Date,value))+ geom_line()+ facet_wrap(~key,scales=\u0026quot;free_y\u0026quot;)  Now, do a pretty plot with scatter points and smoothes plotdata$key[plotdata$key==\u0026quot;Caseloads\u0026quot;] \u0026lt;- \u0026quot;Caseloads (people)\u0026quot; plotdata$key[plotdata$key==\u0026quot;Duration\u0026quot;] \u0026lt;- \u0026quot;Duration (weeks)\u0026quot; ggplot(plotdata, aes(Date,value))+ geom_point(alpha=.5)+ geom_smooth(span=.3)+ facet_wrap(~key,scales=\u0026quot;free_y\u0026quot;)+ theme_light(12,\u0026quot;Avenir\u0026quot;)+ theme(plot.caption = element_text(size=8), strip.text = element_text(size=12), panel.spacing = unit(1,\u0026quot;cm\u0026quot;))+ labs(x=\u0026quot;\u0026quot;, y=\u0026quot;\u0026quot;, title=\u0026quot;Similar trends between caseloads and unemployment duration\u0026quot;, caption=\u0026quot;Caseload data through Sep-18; Duration data through Oct-18 Sources: https://open.alberta.ca/dataset/income-support-caseload-alberta and CANSIM 282-0047 Chart by Blake Shaffer (@bcshaffer)\u0026quot;)  We can also dig deeper into the caseload data First, let‚Äôs look at caseload recipients by family types\n# first filter on the family type categories data.caseload.family \u0026lt;- data.caseload %\u0026gt;% filter(Measure %in% c(\u0026quot;Single Individuals Total\u0026quot;,\u0026quot;Lone-parent Families Total\u0026quot;,\u0026quot;Couples with Children Total\u0026quot;,\u0026quot;Couples without Children Total\u0026quot;)) # clean up the category names, not necessary library(tm) data.caseload.family$Measure \u0026lt;- as.character(data.caseload.family$Measure) data.caseload.family$Measure \u0026lt;- removeWords(data.caseload.family$Measure,\u0026quot;Total\u0026quot;) # now plot it! ggplot(data.caseload.family, aes(Date,Caseloads))+ geom_line(size=1.5,color=\u0026quot;firebrick\u0026quot;)+ facet_wrap(~Measure,nrow=1)+ scale_y_continuous(expand=c(0,0),limits=c(0,45000))+ theme_light(12,\u0026quot;Avenir\u0026quot;)+ theme(plot.caption = element_text(size=8), strip.text = element_text(size=12), panel.grid.major.x = element_blank(), panel.grid.minor.x = element_blank(), panel.grid.minor.y = element_blank())+ labs(x=\u0026quot;\u0026quot;, y=\u0026quot;\u0026quot;, title=\u0026quot;Alberta social assistance caseloads by recipient\u0026#39;s family type\u0026quot;, caption=\u0026quot;Caseload data through Sep-18 Source: https://open.alberta.ca/dataset/income-support-caseload-alberta Chart by Blake Shaffer (@bcshaffer)\u0026quot;) Now let‚Äôs look at the caseload data in terms of type of worker\ndata.caseload.worker \u0026lt;- data.caseload %\u0026gt;% filter(Measure %in% c(\u0026quot;ETW - Working Total\u0026quot;, \u0026quot;ETW - Not Working (Available for Work) Total\u0026quot;, \u0026quot;ETW - Not Working (Unavailable for Work) Total\u0026quot;, \u0026quot;BFE - Total\u0026quot;)) # clean up the category names data.caseload.worker \u0026lt;- data.caseload.worker %\u0026gt;% mutate(Measure=fct_recode(Measure, \u0026quot;Working\u0026quot; = \u0026quot;ETW - Working Total\u0026quot;, \u0026quot;Available for Work\u0026quot; = \u0026quot;ETW - Not Working (Available for Work) Total\u0026quot;, \u0026quot;Unavailable for Work\u0026quot; = \u0026quot;ETW - Not Working (Unavailable for Work) Total\u0026quot;, \u0026quot;Barriers to FT employment\u0026quot; = \u0026quot;BFE - Total\u0026quot;)) # now plot it! ggplot(data.caseload.worker, aes(Date,Caseloads))+ geom_line(size=1.5,color=\u0026quot;royalblue\u0026quot;)+ facet_wrap(~Measure,nrow=1)+ scale_y_continuous(expand=c(0,0),limits=c(0,45000))+ theme_light(12,\u0026quot;Avenir\u0026quot;)+ theme(plot.caption = element_text(size=8), strip.text = element_text(size=12), panel.grid.major.x = element_blank(), panel.grid.minor.x = element_blank(), panel.grid.minor.y = element_blank())+ labs(x=\u0026quot;\u0026quot;, y=\u0026quot;\u0026quot;, title=\u0026quot;Alberta social assistance caseloads by recipient\u0026#39;s worker type\u0026quot;, caption=\u0026quot;Caseload data through Sep-18 Source: https://open.alberta.ca/dataset/income-support-caseload-alberta Chart by Blake Shaffer (@bcshaffer)\u0026quot;)  Bottom line: The bulk of the growth in caseloads has been Single Individuals that are Available for Work. This also coincides with a large growth in Unemployment Duration. This suggests workers that are seeing their unemployment benefits expire may be turning to other forms of social assistance. More details on income support recipients would help policy makers respond effectively.\nh/t to @ronkneebone for raising attention to this important data.\n ","date":1543536000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1543536000,"objectID":"4b25ae0a8d4c0eca1c4c859318102af1","permalink":"/post/caseload-duration/","publishdate":"2018-11-30T00:00:00Z","relpermalink":"/post/caseload-duration/","section":"post","summary":"In this post, I consider the relationship between Social Assistance Caseloads and Unemployment Duration in Alberta.\nLet‚Äôs start by calling the necessary libraries\nlibrary(tidyverse) library(zoo) library(cansim) #Big thanks to Jens von Bergmann and Dmitry Shkolnik for this package!","tags":["unemployment","social assistance"],"title":"Social assistance and unemployment duration in Alberta","type":"post"},{"authors":null,"categories":[],"content":" I like to make charts.\nI often post them on Twitter (@bcshaffer). I thought I might start posting some of them on my website as a way for me to (a) learn to use R Markdown and (b) share some of my R code that creates these charts for others who are interested in learning.\nNote: Both my R code and especially my nascent R Markdown skills are still rough. I‚Äôm sure much of it isn‚Äôt ‚Äúbest practice‚Äù. Far from it. It‚Äôs what I like to call ‚Äògets it done‚Äô code. So learn what you can, and apologies for creating bad habits!\n- Blake\nResources:\nI learned R primarily from Hadley Wickham and Garrett Grolemund‚Äôs book: R for Data Science. I highly recommend it. It assumes zero previous R knowledge, even guiding you through where to download the required software, and gets you up and running in no time.\nFor data visualization tips, I really like Claus Wilke‚Äôs online book: Fundamentals of Data Visualization (with code examples!).\n","date":1543449600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1543449600,"objectID":"5f687a8c78af16c9e4e4142f8b76a4a6","permalink":"/post/charts/","publishdate":"2018-11-29T00:00:00Z","relpermalink":"/post/charts/","section":"post","summary":"I like to make charts.\nI often post them on Twitter (@bcshaffer). I thought I might start posting some of them on my website as a way for me to (a) learn to use R Markdown and (b) share some of my R code that creates these charts for others who are interested in learning.","tags":[],"title":"Blogging Charts!","type":"post"},{"authors":["Blake Shaffer","Ben Dachis","Vincent Thivierge"],"categories":null,"content":"","date":1504224000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1504224000,"objectID":"b6ee9335c4afc2843f7e4f4caaba99a5","permalink":"/publication/cdhi2017/","publishdate":"2017-09-01T00:00:00Z","relpermalink":"/publication/cdhi2017/","section":"publication","summary":"All‚Äôs Well that Ends Well: Addressing End-of-Life Liabilities for Oil and Gas Wells","tags":["end-of-life oil and gas well liabilities","bonding"],"title":"All‚Äôs Well that Ends Well: Addressing End-of-Life Liabilities for Oil and Gas Wells","type":"publication"},{"authors":["Blake Shaffer","Kent Fellows","Michal Moore"],"categories":null,"content":"","date":1472688000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1472688000,"objectID":"464718c9cc94769671517fc061e5b73f","permalink":"/publication/spp_electricityroundtable_summarypaper_2016/","publishdate":"2016-09-01T00:00:00Z","relpermalink":"/publication/spp_electricityroundtable_summarypaper_2016/","section":"publication","summary":"The Challenge of Integrating Renewable Generation in the Alberta Electricity Market: Summary of a School of Public Policy Roundtable Event","tags":["renewables","Alberta electricity market"],"title":"The Challenge of Integrating Renewable Generation in the Alberta Electricity Market","type":"publication"},{"authors":null,"categories":null,"content":"","date":1461715200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1461715200,"objectID":"d1311ddf745551c9e117aa4bb7e28516","permalink":"/project/external-project/","publishdate":"2016-04-27T00:00:00Z","relpermalink":"/project/external-project/","section":"project","summary":"An example of linking directly to an external project website using `external_link`.","tags":["Demo"],"title":"External Project","type":"project"},{"authors":null,"categories":null,"content":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\n","date":1461715200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1461715200,"objectID":"8f66d660a9a2edc2d08e68cc30f701f7","permalink":"/project/internal-project/","publishdate":"2016-04-27T00:00:00Z","relpermalink":"/project/internal-project/","section":"project","summary":"An example of using the in-built project page.","tags":["Deep Learning"],"title":"Internal Project","type":"project"},{"authors":["Blake Shaffer","David Houle","Mark Purdon"],"categories":null,"content":"","date":1459468800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1459468800,"objectID":"82ac513da9ce7fba9efb3bc9424cc08b","permalink":"/publication/ecofiscal2016/","publishdate":"2016-04-01T00:00:00Z","relpermalink":"/publication/ecofiscal2016/","section":"publication","summary":"This report contributes to the Ecofiscal series on revenue-recycling instruments by discussing the free allocation of emissions permits. Free allocation has similarities to other forms of revenue recycling in that it confers a benefit upon its recipients, reducing their financial burden associated with climate policy. There are three main reasons for using free allocation: (1) it is a more precise mechanism to compensate those who are harmed the most from the introduction of carbon pricing; (2) it can help build political support by ameliorating competitiveness risks for vulnerable firms and building constituencies with a vested interest in seeing carbon markets maintained; and (3) free allocations are a useful tool for managing through a period of patchwork climate policy by mitigating emissions leakage‚Äîthe shifting of polluting industry from jurisdictions with stringent climate regulations to those with lax or non-existent policies. The manner in which permits are allocated matters and we contrast two main methods: grandfathering and output-based allocations. While in the case of grandfathering, firms are incentivized to reduce emissions, which allows them to sell their allowances, it also creates a moral hazard, as firms might discount the value of free allowances or reduce production for the purpose of selling unused allowances, potentially exacerbating the problem of emissions leakage. Under an output-based allocation, firms are incentivized to reduce their emission intensity (i.e., produce more while emitting less), but the incentive to reduce emissions by simply curtailing their production is weakened. To realize the full economic advantages of free allocations, including limiting emissions leakage, it is important that they be allocated on an output basis that is updated regularly rather than grandfathered on the basis of historical emissions.","tags":["carbon pricing","output subsidies"],"title":"The Political Economy of Free Allocations in Revenue Recycling: Six Position Papers on the Options for Recycling Carbon Pricing Revenue","type":"publication"},{"authors":["Blake Shaffer"],"categories":null,"content":"","date":1454284800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1454284800,"objectID":"24b9d6975638d6946ffe45a5b8500b0a","permalink":"/publication/spp_royaltyreview_2016/","publishdate":"2016-02-01T00:00:00Z","relpermalink":"/publication/spp_royaltyreview_2016/","section":"publication","summary":"Lifting the hood on Alberta‚Äôs royalty review","tags":["renewables","Alberta electricity market"],"title":"Lifting the hood on Alberta‚Äôs royalty review","type":"publication"},{"authors":["Blake Shaffer","Robert Ford"],"categories":null,"content":" Click the Cite button above to demo the feature to enable visitors to import publication metadata into their reference management software.    Click the Slides button above to demo Academic\u0026rsquo;s Markdown slides feature.   Supplementary notes can be added here, including code and math.\n","date":1441065600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1441065600,"objectID":"f9c63639b0638f3a3a89b5f80536c3d1","permalink":"/old-not-used/publication/journal-article/","publishdate":"2017-01-01T00:00:00Z","relpermalink":"/old-not-used/publication/journal-article/","section":"OLD-NOT-USED","summary":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum.","tags":["Source Themes"],"title":"An example journal article","type":"OLD-NOT-USED"},{"authors":["Blake Shaffer","Robert Ford"],"categories":null,"content":" Click the Cite button above to demo the feature to enable visitors to import publication metadata into their reference management software.    Click the Slides button above to demo Academic\u0026rsquo;s Markdown slides feature.   Supplementary notes can be added here, including code and math.\n","date":1372636800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1372636800,"objectID":"b32b1567e63ee623140ebced743a96ee","permalink":"/old-not-used/publication/conference-paper/","publishdate":"2017-01-01T00:00:00Z","relpermalink":"/old-not-used/publication/conference-paper/","section":"OLD-NOT-USED","summary":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum.","tags":["Source Themes"],"title":"An example conference paper","type":"OLD-NOT-USED"},{"authors":["Blake Shaffer","Georgina Santos"],"categories":null,"content":"","date":1096588800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1096588800,"objectID":"2c1cab1ef8a09fc83a3aedd788b27350","permalink":"/publication/pwmp2004/","publishdate":"2004-10-01T00:00:00Z","relpermalink":"/publication/pwmp2004/","section":"publication","summary":"On February 17th, 2003, the London Congestion Charging Scheme came into effect. Preliminary results show a significant response to the 5GBP (8USD) charge. Congestion over the first year decreased by 30 per cent, overall traffic levels within the charging zone fell by 16 per cent, speeds for car travel increased by over 20 per cent and bus travel became more reliable. Elasticities of demand for trips by car with respect to generalized costs are estimated to be between ‚Äì1.32 and ‚Äì2.10. The average marginal congestion cost within the central zone is estimated at 1.65GBP per veh-km (approximately 2.58USD per veh-km). The net economic benefits of the Scheme for the first year were 50 million (78 million USD) and the net revenues, 68 million GBP (106 million USD). Net revenues are being mainly used to improve public transport.","tags":["traffic congestion","London congestion charging","demand elasticities,","road pricing"],"title":"Preliminary Results of the London Congestion Charging Scheme","type":"publication"}]